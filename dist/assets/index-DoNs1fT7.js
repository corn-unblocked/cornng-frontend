(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const Lr="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Lr);const Br=1,Dr=2,Fr=16,Wr=1,qr=2,U=Symbol(),Vr="http://www.w3.org/1999/xhtml",Kt=!1;var ht=Array.isArray,jr=Array.prototype.indexOf,pt=Array.from,it=Object.defineProperty,pe=Object.getOwnPropertyDescriptor,Hr=Object.getOwnPropertyDescriptors,$r=Object.prototype,zr=Array.prototype,Gt=Object.getPrototypeOf,Rt=Object.isExtensible;function Yr(e){for(var t=0;t<e.length;t++)e[t]()}function Kr(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}function Gr(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const F=2,_t=4,wt=8,Ae=16,Q=32,ge=64,Jt=128,j=256,Fe=512,R=1024,L=2048,le=4096,H=8192,ue=16384,gt=32768,mt=65536,Nt=1<<17,Jr=1<<18,bt=1<<19,Xt=1<<20,at=1<<21,yt=1<<22,ie=1<<23,ke=Symbol("$state"),Xr=Symbol("legacy props"),Zr=Symbol(""),xt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Qr(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function en(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function tn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function rn(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function nn(e){throw new Error("https://svelte.dev/e/effect_orphan")}function sn(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function an(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function on(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ln(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let un=!1;function Zt(e){return e===this.v}function fn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Qt(e){return!fn(e,this.v)}let cn=!1,$=null;function We(e){$=e}function Oe(e,t=!1,r){$={p:$,c:null,e:null,s:e,x:null,l:null}}function Ue(e){var t=$,r=t.e;if(r!==null){t.e=null;for(var n of r)vr(n)}return $=t.p,{}}function er(){return!0}const vn=new WeakMap;function dn(e){var t=y;if(t===null)return b.f|=ie,e;if((t.f&gt)===0){if((t.f&Jt)===0)throw!t.parent&&e instanceof Error&&tr(e),e;t.b.error(e)}else kt(e,t)}function kt(e,t){for(;t!==null;){if((t.f&Jt)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e instanceof Error&&tr(e),e}function tr(e){const t=vn.get(e);t&&(it(e,"message",{value:t.message}),it(e,"stack",{value:t.stack}))}let qe=[];function hn(){var e=qe;qe=[],Yr(e)}function rr(e){qe.length===0&&queueMicrotask(hn),qe.push(e)}function pn(){for(var e=y.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Qr(),e}function Ke(e){var t=F|L,r=b!==null&&(b.f&F)!==0?b:null;return y===null||r!==null&&(r.f&j)!==0?t|=j:y.f|=bt,{ctx:$,deps:null,effects:null,equals:Zt,f:t,fn:e,reactions:null,rv:0,v:U,wv:0,parent:r??y,ac:null}}function _n(e,t){let r=y;r===null&&en();var n=r.b,i=void 0,s=Se(U),a=null,u=!b;return An(()=>{try{var l=e()}catch(v){l=Promise.reject(v)}var f=()=>l;i=a?.then(f,f)??Promise.resolve(l),a=i;var c=O,d=n.pending;u&&(n.update_pending_count(1),d||c.increment());const o=(v,h=void 0)=>{a=null,d||c.activate(),h?h!==xt&&(s.f|=ie,je(s,h)):((s.f&ie)!==0&&(s.f^=ie),je(s,v)),u&&(n.update_pending_count(-1),d||c.decrement()),ir()};if(i.then(o,v=>o(null,v||"unknown")),c)return()=>{queueMicrotask(()=>c.neuter())}}),new Promise(l=>{function f(c){function d(){c===i?l(s):f(i)}c.then(d,d)}f(i)})}function Ge(e){const t=Ke(e);return br(t),t}function wn(e){const t=Ke(e);return t.equals=Qt,t}function nr(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Z(t[r])}}function gn(e){for(var t=e.parent;t!==null;){if((t.f&F)===0)return t;t=t.parent}return null}function Et(e){var t,r=y;ne(gn(e));try{nr(e),t=kr(e)}finally{ne(r)}return t}function sr(e){var t=Et(e);if(e.equals(t)||(e.v=t,e.wv=yr()),!fe)if(we!==null)we.set(e,e.v);else{var r=(te||(e.f&j)!==0)&&e.deps!==null?le:R;N(e,r)}}function mn(e,t,r){const n=Ke;if(t.length===0){r(e.map(n));return}var i=O,s=y,a=bn(),u=pn();Promise.all(t.map(l=>_n(l))).then(l=>{i?.activate(),a();try{r([...e.map(n),...l])}catch(f){(s.f&ue)===0&&kt(f,s)}i?.deactivate(),ir()}).catch(l=>{u.error(l)})}function bn(){var e=y,t=b,r=$;return function(){ne(e),K(t),We(r)}}function ir(){ne(null),K(null),We(null)}const Le=new Set;let O=null,we=null,It=new Set,Ve=[];function ar(){const e=Ve.shift();Ve.length>0&&queueMicrotask(ar),e()}let ye=[],Pt=null,ot=!1;class Pe{#t=new Map;#e=new Map;#n=new Set;#r=0;#i=null;#a=!1;#s=[];#f=[];#l=[];#o=[];#u=[];skipped_effects=new Set;#v(t){ye=[];var r=null;if(Le.size>1){r=new Map,we=new Map;for(const[s,a]of this.#t)r.set(s,{v:s.v,wv:s.wv}),s.v=a;for(const s of Le)if(s!==this)for(const[a,u]of s.#e)r.has(a)||(r.set(a,{v:a.v,wv:a.wv}),a.v=u)}for(const s of t)this.#d(s);if(this.#s.length===0&&this.#r===0){var n=this.#l,i=this.#o;this.#l=[],this.#o=[],this.#u=[],this.#c(),Lt(n),Lt(i),this.#i?.resolve()}else{for(const s of this.#l)N(s,R);for(const s of this.#o)N(s,R);for(const s of this.#u)N(s,R)}if(r){for(const[s,{v:a,wv:u}]of r)s.wv<=u&&(s.v=a);we=null}for(const s of this.#s)Ee(s);for(const s of this.#f)Ee(s);this.#s=[],this.#f=[]}#d(t){t.f^=R;for(var r=t.first;r!==null;){var n=r.f,i=(n&(Q|ge))!==0,s=i&&(n&R)!==0,a=s||(n&H)!==0||this.skipped_effects.has(r);if(!a&&r.fn!==null){if(i)r.f^=R;else if((n&_t)!==0)this.#o.push(r);else if(Xe(r))if((n&yt)!==0){var u=r.b?.pending?this.#f:this.#s;u.push(r)}else(r.f&Ae)!==0&&this.#u.push(r),Ee(r);var l=r.first;if(l!==null){r=l;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)r=f.next,f=f.parent}}capture(t,r){this.#e.has(t)||this.#e.set(t,r),this.#t.set(t,t.v)}activate(){O=this}deactivate(){O=null;for(const t of It)if(It.delete(t),t(),O!==null)break}neuter(){this.#a=!0}flush(){ye.length>0?this.flush_effects():this.#c(),O===this&&(this.#r===0&&Le.delete(this),this.deactivate())}flush_effects(){var t=_e;ot=!0;try{var r=0;for(Dt(!0);ye.length>0;){if(r++>1e3){var n,i;yn()}this.#v(ye),ae.clear()}}finally{ot=!1,Dt(t),Pt=null}}#c(){if(!this.#a)for(const t of this.#n)t();this.#n.clear()}increment(){this.#r+=1}decrement(){if(this.#r-=1,this.#r===0){for(const t of this.#l)N(t,L),re(t);for(const t of this.#o)N(t,L),re(t);for(const t of this.#u)N(t,L),re(t);this.#l=[],this.#o=[],this.flush()}else this.deactivate()}add_callback(t){this.#n.add(t)}settled(){return(this.#i??=Kr()).promise}static ensure(t=!0){if(O===null){const r=O=new Pe;Le.add(O),t&&Pe.enqueue(()=>{O===r&&r.flush()})}return O}static enqueue(t){Ve.length===0&&queueMicrotask(ar),Ve.unshift(t)}}function yn(){try{sn()}catch(e){kt(e,Pt)}}function Lt(e){var t=e.length;if(t!==0){for(var r=0;r<t;r++){var n=e[r];if((n.f&(ue|H))===0&&Xe(n)){var i=$e;if(Ee(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?wr(n):n.fn=null),$e>i&&(n.f&Xt)!==0)break}}for(;r<t;r+=1)re(e[r])}}function re(e){for(var t=Pt=e;t.parent!==null;){t=t.parent;var r=t.f;if(ot&&t===y&&(r&Ae)!==0)return;if((r&(ge|Q))!==0){if((r&R)===0)return;t.f^=R}}ye.push(t)}const ae=new Map;function Se(e,t){var r={f:0,v:e,reactions:null,equals:Zt,rv:0,wv:0};return r}function P(e,t){const r=Se(e);return br(r),r}function xn(e,t=!1,r=!0){const n=Se(e);return t||(n.equals=Qt),n}function x(e,t,r=!1){b!==null&&(!Y||(b.f&Nt)!==0)&&er()&&(b.f&(F|Ae|yt|Nt))!==0&&!J?.includes(e)&&ln();let n=r?G(t):t;return je(e,n)}function je(e,t){if(!e.equals(t)){var r=e.v;fe?ae.set(e,t):ae.set(e,r),e.v=t,Pe.ensure().capture(e,r),(e.f&F)!==0&&((e.f&L)!==0&&Et(e),N(e,(e.f&j)===0?R:le)),e.wv=yr(),or(e,L),y!==null&&(y.f&R)!==0&&(y.f&(Q|ge))===0&&(q===null?Rn([e]):q.push(e))}return t}function Qe(e){x(e,e.v+1)}function or(e,t){var r=e.reactions;if(r!==null)for(var n=r.length,i=0;i<n;i++){var s=r[i],a=s.f;(a&L)===0&&N(s,t),(a&F)!==0?or(s,le):(a&L)===0&&re(s)}}function G(e){if(typeof e!="object"||e===null||ke in e)return e;const t=Gt(e);if(t!==$r&&t!==zr)return e;var r=new Map,n=ht(e),i=P(0),s=oe,a=u=>{if(oe===s)return u();var l=b,f=oe;K(null),Wt(s);var c=u();return K(l),Wt(f),c};return n&&r.set("length",P(e.length)),new Proxy(e,{defineProperty(u,l,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&an();var c=r.get(l);return c===void 0?c=a(()=>{var d=P(f.value);return r.set(l,d),d}):x(c,f.value,!0),!0},deleteProperty(u,l){var f=r.get(l);if(f===void 0){if(l in u){const c=a(()=>P(U));r.set(l,c),Qe(i)}}else x(f,U),Qe(i);return!0},get(u,l,f){if(l===ke)return e;var c=r.get(l),d=l in u;if(c===void 0&&(!d||pe(u,l)?.writable)&&(c=a(()=>{var v=G(d?u[l]:U),h=P(v);return h}),r.set(l,c)),c!==void 0){var o=w(c);return o===U?void 0:o}return Reflect.get(u,l,f)},getOwnPropertyDescriptor(u,l){var f=Reflect.getOwnPropertyDescriptor(u,l);if(f&&"value"in f){var c=r.get(l);c&&(f.value=w(c))}else if(f===void 0){var d=r.get(l),o=d?.v;if(d!==void 0&&o!==U)return{enumerable:!0,configurable:!0,value:o,writable:!0}}return f},has(u,l){if(l===ke)return!0;var f=r.get(l),c=f!==void 0&&f.v!==U||Reflect.has(u,l);if(f!==void 0||y!==null&&(!c||pe(u,l)?.writable)){f===void 0&&(f=a(()=>{var o=c?G(u[l]):U,v=P(o);return v}),r.set(l,f));var d=w(f);if(d===U)return!1}return c},set(u,l,f,c){var d=r.get(l),o=l in u;if(n&&l==="length")for(var v=f;v<d.v;v+=1){var h=r.get(v+"");h!==void 0?x(h,U):v in u&&(h=a(()=>P(U)),r.set(v+"",h))}if(d===void 0)(!o||pe(u,l)?.writable)&&(d=a(()=>P(void 0)),x(d,G(f)),r.set(l,d));else{o=d.v!==U;var _=a(()=>G(f));x(d,_)}var p=Reflect.getOwnPropertyDescriptor(u,l);if(p?.set&&p.set.call(c,f),!o){if(n&&typeof l=="string"){var k=r.get("length"),g=Number(l);Number.isInteger(g)&&g>=k.v&&x(k,g+1)}Qe(i)}return!0},ownKeys(u){w(i);var l=Reflect.ownKeys(u).filter(d=>{var o=r.get(d);return o===void 0||o.v!==U});for(var[f,c]of r)c.v!==U&&!(f in u)&&l.push(f);return l},setPrototypeOf(){on()}})}var Bt,lr,ur,fr;function kn(){if(Bt===void 0){Bt=window,lr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ur=pe(t,"firstChild").get,fr=pe(t,"nextSibling").get,Rt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Rt(r)&&(r.__t=void 0)}}function Re(e=""){return document.createTextNode(e)}function He(e){return ur.call(e)}function Je(e){return fr.call(e)}function C(e,t){return He(e)}function lt(e,t){{var r=He(e);return r instanceof Comment&&r.data===""?Je(r):r}}function M(e,t=1,r=!1){let n=e;for(;t--;)n=Je(n);return n}function En(e){e.textContent=""}function cr(){return!1}function Pn(e){y===null&&b===null&&nn(),b!==null&&(b.f&j)!==0&&y===null&&rn(),fe&&tn()}function Sn(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function ee(e,t,r,n=!0){var i=y;i!==null&&(i.f&H)!==0&&(e|=H);var s={ctx:$,deps:null,nodes_start:null,nodes_end:null,f:e|L,first:null,fn:t,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Ee(s),s.f|=gt}catch(l){throw Z(s),l}else t!==null&&re(s);var a=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&bt)===0;if(!a&&n&&(i!==null&&Sn(s,i),b!==null&&(b.f&F)!==0)){var u=b;(u.effects??=[]).push(s)}return s}function Cn(e){const t=ee(wt,null,!1);return N(t,R),t.teardown=e,t}function St(e){Pn();var t=y.f,r=!b&&(t&Q)!==0&&(t&gt)===0;if(r){var n=$;(n.e??=[]).push(e)}else return vr(e)}function vr(e){return ee(_t|Xt,e,!1)}function Tn(e){Pe.ensure();const t=ee(ge,e,!0);return(r={})=>new Promise(n=>{r.outro?Ct(t,()=>{Z(t),n(void 0)}):(Z(t),n(void 0))})}function Mn(e){return ee(_t,e,!1)}function An(e){return ee(yt|bt,e,!0)}function dr(e,t=0){return ee(wt|t,e,!0)}function Ce(e,t=[],r=[]){mn(t,r,n=>{ee(wt,()=>e(...n.map(w)),!0)})}function hr(e,t=0){var r=ee(Ae|t,e,!0);return r}function Te(e,t=!0){return ee(Q,e,!0,t)}function pr(e){var t=e.teardown;if(t!==null){const r=fe,n=b;Ft(!0),K(null);try{t.call(null)}finally{Ft(r),K(n)}}}function _r(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){r.ac?.abort(xt);var n=r.next;(r.f&ge)!==0?r.parent=null:Z(r,t),r=n}}function On(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Q)===0&&Z(t),t=r}}function Z(e,t=!0){var r=!1;(t||(e.f&Jr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Un(e.nodes_start,e.nodes_end),r=!0),_r(e,t&&!r),ze(e,0),N(e,ue);var n=e.transitions;if(n!==null)for(const s of n)s.stop();pr(e);var i=e.parent;i!==null&&i.first!==null&&wr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Un(e,t){for(;e!==null;){var r=e===t?null:Je(e);e.remove(),e=r}}function wr(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Ct(e,t){var r=[];Tt(e,r,!0),gr(r,()=>{Z(e),t&&t()})}function gr(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var i of e)i.out(n)}else t()}function Tt(e,t,r){if((e.f&H)===0){if(e.f^=H,e.transitions!==null)for(const a of e.transitions)(a.is_global||r)&&t.push(a);for(var n=e.first;n!==null;){var i=n.next,s=(n.f&mt)!==0||(n.f&Q)!==0;Tt(n,t,s?r:!1),n=i}}}function Mt(e){mr(e,!0)}function mr(e,t){if((e.f&H)!==0){e.f^=H,(e.f&R)===0&&(N(e,L),re(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&mt)!==0||(r.f&Q)!==0;mr(r,i?t:!1),r=n}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let _e=!1;function Dt(e){_e=e}let fe=!1;function Ft(e){fe=e}let b=null,Y=!1;function K(e){b=e}let y=null;function ne(e){y=e}let J=null;function br(e){b!==null&&(J===null?J=[e]:J.push(e))}let I=null,D=0,q=null;function Rn(e){q=e}let $e=1,Me=0,oe=Me;function Wt(e){oe=e}let te=!1;function yr(){return++$e}function Xe(e){var t=e.f;if((t&L)!==0)return!0;if((t&le)!==0){var r=e.deps,n=(t&j)!==0;if(r!==null){var i,s,a=(t&Fe)!==0,u=n&&y!==null&&!te,l=r.length;if((a||u)&&(y===null||(y.f&ue)===0)){var f=e,c=f.parent;for(i=0;i<l;i++)s=r[i],(a||!s?.reactions?.includes(f))&&(s.reactions??=[]).push(f);a&&(f.f^=Fe),u&&c!==null&&(c.f&j)===0&&(f.f^=j)}for(i=0;i<l;i++)if(s=r[i],Xe(s)&&sr(s),s.wv>e.wv)return!0}(!n||y!==null&&!te)&&N(e,R)}return!1}function xr(e,t,r=!0){var n=e.reactions;if(n!==null&&!J?.includes(e))for(var i=0;i<n.length;i++){var s=n[i];(s.f&F)!==0?xr(s,t,!1):t===s&&(r?N(s,L):(s.f&R)!==0&&N(s,le),re(s))}}function kr(e){var t=I,r=D,n=q,i=b,s=te,a=J,u=$,l=Y,f=oe,c=e.f;I=null,D=0,q=null,te=(c&j)!==0&&(Y||!_e||b===null),b=(c&(Q|ge))===0?e:null,J=null,We(e.ctx),Y=!1,oe=++Me,e.ac!==null&&(e.ac.abort(xt),e.ac=null);try{e.f|=at;var d=(0,e.fn)(),o=e.deps;if(I!==null){var v;if(ze(e,D),o!==null&&D>0)for(o.length=D+I.length,v=0;v<I.length;v++)o[D+v]=I[v];else e.deps=o=I;if(!te||(c&F)!==0&&e.reactions!==null)for(v=D;v<o.length;v++)(o[v].reactions??=[]).push(e)}else o!==null&&D<o.length&&(ze(e,D),o.length=D);if(er()&&q!==null&&!Y&&o!==null&&(e.f&(F|le|L))===0)for(v=0;v<q.length;v++)xr(q[v],e);return i!==null&&i!==e&&(Me++,q!==null&&(n===null?n=q:n.push(...q))),(e.f&ie)!==0&&(e.f^=ie),d}catch(h){return dn(h)}finally{e.f^=at,I=t,D=r,q=n,b=i,te=s,J=a,We(u),Y=l,oe=f}}function Nn(e,t){let r=t.reactions;if(r!==null){var n=jr.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}r===null&&(t.f&F)!==0&&(I===null||!I.includes(t))&&(N(t,le),(t.f&(j|Fe))===0&&(t.f^=Fe),nr(t),ze(t,0))}function ze(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Nn(e,r[n])}function Ee(e){var t=e.f;if((t&ue)===0){N(e,R);var r=y,n=_e;y=e,_e=!0;try{(t&Ae)!==0?On(e):_r(e),pr(e);var i=kr(e);e.teardown=typeof i=="function"?i:null,e.wv=$e;var s;Kt&&cn&&(e.f&L)!==0&&e.deps}finally{_e=n,y=r}}}function w(e){var t=e.f,r=(t&F)!==0;if(b!==null&&!Y){var n=y!==null&&(y.f&ue)!==0;if(!n&&!J?.includes(e)){var i=b.deps;if((b.f&at)!==0)e.rv<Me&&(e.rv=Me,I===null&&i!==null&&i[D]===e?D++:I===null?I=[e]:(!te||!I.includes(e))&&I.push(e));else{(b.deps??=[]).push(e);var s=e.reactions;s===null?e.reactions=[b]:s.includes(b)||s.push(b)}}}else if(r&&e.deps===null&&e.effects===null){var a=e,u=a.parent;u!==null&&(u.f&j)===0&&(a.f^=j)}if(fe){if(ae.has(e))return ae.get(e);if(r){a=e;var l=a.v;return((a.f&R)===0&&a.reactions!==null||Er(a))&&(l=Et(a)),ae.set(a,l),l}}else if(r){if(a=e,we?.has(a))return we.get(a);Xe(a)&&sr(a)}if((e.f&ie)!==0)throw e.v;return e.v}function Er(e){if(e.v===U)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ae.has(t)||(t.f&F)!==0&&Er(t))return!0;return!1}function Pr(e){var t=Y;try{return Y=!0,e()}finally{Y=t}}const In=-7169;function N(e,t){e.f=e.f&In|t}let qt=!1;function Ln(){qt||(qt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Sr(e){var t=b,r=y;K(null),ne(null);try{return e()}finally{K(t),ne(r)}}function Bn(e,t,r,n=r){e.addEventListener(t,()=>Sr(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),Ln()}const Cr=new Set,ut=new Set;function Dn(e,t,r,n={}){function i(s){if(n.capture||xe.call(t,s),!s.cancelBubble)return Sr(()=>r?.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?rr(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Tr(e,t,r,n,i){var s={capture:n,passive:i},a=Dn(e,t,r,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Cn(()=>{t.removeEventListener(e,a,s)})}function At(e){for(var t=0;t<e.length;t++)Cr.add(e[t]);for(var r of ut)r(e)}function xe(e){var t=this,r=t.ownerDocument,n=e.type,i=e.composedPath?.()||[],s=i[0]||e.target,a=0,u=e.__root;if(u){var l=i.indexOf(u);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var f=i.indexOf(t);if(f===-1)return;l<=f&&(a=l)}if(s=i[a]||e.target,s!==t){it(e,"currentTarget",{configurable:!0,get(){return s||r}});var c=b,d=y;K(null),ne(null);try{for(var o,v=[];s!==null;){var h=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+n];if(_!=null&&(!s.disabled||e.target===s))if(ht(_)){var[p,...k]=_;p.apply(s,[e,...k])}else _.call(s,e)}catch(g){o?v.push(g):o=g}if(e.cancelBubble||h===t||h===null)break;s=h}if(o){for(let g of v)queueMicrotask(()=>{throw g});throw o}}finally{e.__root=t,delete e.currentTarget,K(c),ne(d)}}}function Fn(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ft(e,t){var r=y;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function ce(e,t){var r=(t&Wr)!==0,n=(t&qr)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=Fn(s?e:"<!>"+e),r||(i=He(i)));var a=n||lr?document.importNode(i,!0):i.cloneNode(!0);if(r){var u=He(a),l=a.lastChild;ft(u,l)}else ft(a,a);return a}}function Mr(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Re();return e.append(t,r),ft(t,r),e}function X(e,t){e!==null&&e.before(t)}const Wn=["touchstart","touchmove"];function qn(e){return Wn.includes(e)}function et(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Vn(e,t){return jn(e,t)}const he=new Map;function jn(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:a=!0}){kn();var u=new Set,l=d=>{for(var o=0;o<d.length;o++){var v=d[o];if(!u.has(v)){u.add(v);var h=qn(v);t.addEventListener(v,xe,{passive:h});var _=he.get(v);_===void 0?(document.addEventListener(v,xe,{passive:h}),he.set(v,1)):he.set(v,_+1)}}};l(pt(Cr)),ut.add(l);var f=void 0,c=Tn(()=>{var d=r??t.appendChild(Re());return Te(()=>{if(s){Oe({});var o=$;o.c=s}i&&(n.$$events=i),f=e(d,n)||{},s&&Ue()}),()=>{for(var o of u){t.removeEventListener(o,xe);var v=he.get(o);--v===0?(document.removeEventListener(o,xe),he.delete(o)):he.set(o,v)}ut.delete(l),d!==r&&d.parentNode?.removeChild(d)}});return Hn.set(f,c),f}let Hn=new WeakMap;function Ot(e,t,r=!1){var n=e,i=null,s=null,a=U,u=r?mt:0,l=!1;const f=(v,h=!0)=>{l=!0,o(h,v)};var c=null;function d(){c!==null&&(c.lastChild.remove(),n.before(c),c=null);var v=a?i:s,h=a?s:i;v&&Mt(v),h&&Ct(h,()=>{a?s=null:i=null})}const o=(v,h)=>{if(a!==(a=v)){var _=cr(),p=n;if(_&&(c=document.createDocumentFragment(),c.append(p=Re())),a?i??=h&&Te(()=>h(p)):s??=h&&Te(()=>h(p)),_){var k=O,g=a?i:s,m=a?s:i;g&&k.skipped_effects.delete(g),m&&k.skipped_effects.add(m),k.add_callback(d)}else d()}};hr(()=>{l=!1,t(f),l||o(null,null)},u)}function $n(e,t){return t}function zn(e,t,r){for(var n=e.items,i=[],s=t.length,a=0;a<s;a++)Tt(t[a].e,i,!0);var u=s>0&&i.length===0&&r!==null;if(u){var l=r.parentNode;En(l),l.append(r),n.clear(),z(e,t[0].prev,t[s-1].next)}gr(i,()=>{for(var f=0;f<s;f++){var c=t[f];u||(n.delete(c.k),z(e,c.prev,c.next)),Z(c.e,!u)}})}function Yn(e,t,r,n,i,s=null){var a=e,u={flags:t,items:new Map,first:null};{var l=e;a=l.appendChild(Re())}var f=null,c=!1,d=new Map,o=wn(()=>{var p=r();return ht(p)?p:p==null?[]:pt(p)}),v,h;function _(){Kn(h,v,u,d,a,i,t,n,r),s!==null&&(v.length===0?f?Mt(f):f=Te(()=>s(a)):f!==null&&Ct(f,()=>{f=null}))}hr(()=>{h??=y,v=w(o);var p=v.length;if(!(c&&p===0)){c=p===0;var k,g,m,T;if(cr()){var S=new Set,se=O;for(g=0;g<p;g+=1){m=v[g],T=n(m,g);var ve=u.items.get(T)??d.get(T);ve?Ar(ve,m,g):(k=Or(null,u,null,null,m,T,g,i,t,r,!0),d.set(T,k)),S.add(T)}for(const[B,W]of u.items)S.has(B)||se.skipped_effects.add(W.e);se.add_callback(_)}else _();w(o)}})}function Kn(e,t,r,n,i,s,a,u,l){var f=t.length,c=r.items,d=r.first,o=d,v,h=null,_=[],p=[],k,g,m,T;for(T=0;T<f;T+=1){if(k=t[T],g=u(k,T),m=c.get(g),m===void 0){var S=n.get(g);if(S!==void 0){n.delete(g),c.set(g,S);var se=h?h.next:o;z(r,h,S),z(r,S,se),tt(S,se,i),h=S}else{var ve=o?o.e.nodes_start:i;h=Or(ve,r,h,h===null?r.first:h.next,k,g,T,s,a,l)}c.set(g,h),_=[],p=[],o=h.next;continue}if(Ar(m,k,T),(m.e.f&H)!==0&&Mt(m.e),m!==o){if(v!==void 0&&v.has(m)){if(_.length<p.length){var B=p[0],W;h=B.prev;var me=_[0],de=_[_.length-1];for(W=0;W<_.length;W+=1)tt(_[W],B,i);for(W=0;W<p.length;W+=1)v.delete(p[W]);z(r,me.prev,de.next),z(r,h,me),z(r,de,B),o=B,h=de,T-=1,_=[],p=[]}else v.delete(m),tt(m,o,i),z(r,m.prev,m.next),z(r,m,h===null?r.first:h.next),z(r,h,m),h=m;continue}for(_=[],p=[];o!==null&&o.k!==g;)(o.e.f&H)===0&&(v??=new Set).add(o),p.push(o),o=o.next;if(o===null)continue;m=o}_.push(m),h=m,o=m.next}if(o!==null||v!==void 0){for(var be=v===void 0?[]:pt(v);o!==null;)(o.e.f&H)===0&&be.push(o),o=o.next;var Ne=be.length;if(Ne>0){var Ie=f===0?i:null;zn(r,be,Ie)}}e.first=r.first&&r.first.e,e.last=h&&h.e;for(var Ze of n.values())Z(Ze.e);n.clear()}function Ar(e,t,r,n){je(e.v,t),e.i=r}function Or(e,t,r,n,i,s,a,u,l,f,c){var d=(l&Br)!==0,o=(l&Fr)===0,v=d?o?xn(i,!1,!1):Se(i):i,h=(l&Dr)===0?a:Se(a),_={i:h,v,k:s,a:null,e:null,prev:r,next:n};try{if(e===null){var p=document.createDocumentFragment();p.append(e=Re())}return _.e=Te(()=>u(e,v,h,f),un),_.e.prev=r&&r.e,_.e.next=n&&n.e,r===null?c||(t.first=_):(r.next=_,r.e.next=_.e),n!==null&&(n.prev=_,n.e.prev=_.e),_}finally{}}function tt(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,i=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==null&&s!==n;){var a=Je(s);i.before(s),s=a}}function z(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}const Gn=Symbol("is custom element"),Jn=Symbol("is html");function Xn(e,t){var r=Ur(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function De(e,t,r,n){var i=Ur(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Zr]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Zn(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Ur(e){return e.__attributes??={[Gn]:e.nodeName.includes("-"),[Jn]:e.namespaceURI===Vr}}var Vt=new Map;function Zn(e){var t=Vt.get(e.nodeName);if(t)return t;Vt.set(e.nodeName,t=[]);for(var r,n=e,i=Element.prototype;i!==n;){r=Hr(n);for(var s in r)r[s].set&&t.push(s);n=Gt(n)}return t}function Rr(e,t,r=t){var n=new WeakSet;Bn(e,"input",i=>{var s=i?e.defaultValue:e.value;if(s=rt(e)?nt(s):s,r(s),O!==null&&n.add(O),s!==(s=t())){var a=e.selectionStart,u=e.selectionEnd;e.value=s??"",u!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(u,e.value.length))}}),Pr(t)==null&&e.value&&(r(rt(e)?nt(e.value):e.value),O!==null&&n.add(O)),dr(()=>{var i=t();e===document.activeElement&&n.has(O)||rt(e)&&i===nt(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function rt(e){var t=e.type;return t==="number"||t==="range"}function nt(e){return e===""?null:+e}function jt(e,t){return e===t||e?.[ke]===t}function Ut(e={},t,r,n){return Mn(()=>{var i,s;return dr(()=>{i=s,s=[],Pr(()=>{e!==r(...s)&&(t(e,...s),i&&jt(r(...i),e)&&t(null,...i))})}),()=>{rr(()=>{s&&jt(r(...s),e)&&t(null,...s)})}}),e}let Be=!1;function Qn(e){var t=Be;try{return Be=!1,[e(),Be]}finally{Be=t}}function es(e,t,r,n){var i=n,s=!0,a=()=>(s&&(s=!1,i=n),i),u;{var l=ke in e||Xr in e;u=pe(e,t)?.set??(l&&t in e?p=>e[t]=p:void 0)}var f,c=!1;[f,c]=Qn(()=>e[t]);var d;if(d=()=>{var p=e[t];return p===void 0?a():(s=!0,p)},u){var o=e.$$legacy;return function(p,k){return arguments.length>0?((!k||o||c)&&u(k?d():p),p):d()}}var v=!1,h=Ke(()=>(v=!1,d()));w(h);var _=y;return function(p,k){if(arguments.length>0){const g=k?w(h):G(p);return x(h,g),v=!0,i!==void 0&&(i=g),p}return fe&&v||(_.f&ue)!==0?h.v:w(h)}}let ts=class{#t;get configVersion(){return w(this.#t)}set configVersion(t){x(this.#t,t,!0)}#e;get useBare(){return w(this.#e)}set useBare(t){x(this.#e,t,!0)}#n;get wispSelectedProxy(){return w(this.#n)}set wispSelectedProxy(t){x(this.#n,t,!0)}#r;get wispCustomProxy(){return w(this.#r)}set wispCustomProxy(t){x(this.#r,t,!0)}#i;get bareSelectedProxy(){return w(this.#i)}set bareSelectedProxy(t){x(this.#i,t,!0)}#a;get bareCustomProxy(){return w(this.#a)}set bareCustomProxy(t){x(this.#a,t,!0)}#s;get probeTimeout(){return w(this.#s)}set probeTimeout(t){x(this.#s,t,!0)}constructor(){this.#t=P(2),this.#e=P(!1),this.#n=P("auto"),this.#r=P(""),this.#i=P("auto"),this.#a=P(""),this.#s=P(5e3)}};function rs(e){localStorage.setItem("config",JSON.stringify({configVersion:e.configVersion,useBare:e.useBare,wispSelectedProxy:e.wispSelectedProxy,wispCustomProxy:e.wispCustomProxy,bareSelectedProxy:e.bareSelectedProxy,bareCustomProxy:e.bareCustomProxy,probeTimeout:e.probeTimeout}))}function ns(){const e=new ts;let t=localStorage.getItem("config");if(t==null)return e;let r=JSON.parse(t);if(r.configVersion==null||r.configVersion<e.configVersion)return e;for(const n in r)e[n]=r[n];return e}const E=G(ns()),ct={auto:"Auto",custom:"Custom","https://aluu.xyz/bare/":"Alu 1","https://freemathhw.xyz/bare/":"Alu 2","https://canvaslogin.org/bare/":"Alu 3","https://tnlnda.xyz/bare/":"Alu 4","https://incog.works/bare/":"Incognito 1","https://math.mathpuns.lol/bare/":"Incognito 2","https://math.americahistory.online/bare/":"Incognito 3","https://english.geniuslecture.club/bare/":"Incognito 4","https://definitelyscience.com/bare/":"Definitely Science 1","https://onlinegames.ro/bare/":"Definitely Science 2","https://mages.io/bare/":"Definitely Science 3","https://lichology.com/bare/":"Definitely Science 4","https://kazwire.com/bare/":"Kazwire"},vt={auto:"Auto",custom:"Custom","wss://aluu.xyz/wisp/":"Alu 1","wss://freemathhw.xyz/wisp/":"Alu 2","wss://canvaslogin.org/wisp/":"Alu 3","wss://tnlnda.xyz/wisp/":"Alu 4","wss://incog.works/wisp/":"Incognito 1","wss://math.mathpuns.lol/wisp/":"Incognito 2","wss://math.americahistory.online/wisp/":"Incognito 3","wss://english.geniuslecture.club/wisp/":"Incognito 4","wss://definitelyscience.com/wisp/":"Definitely Science 1","wss://onlinegames.ro/wisp/":"Definitely Science 2","wss://mages.io/wisp/":"Definitely Science 3","wss://lichology.com/wisp/":"Definitely Science 4","wss://anura.pro/":"Anura 1","wss://adoptmy.baby/":"Anura 2","wss://wallstjournal.click/":"Anura 3","wss://phantom.lol/wisp/":"Phantom","wss://wisp.mercurywork.shop/":"Mercury"};var ss=ce("<li><button> </button></li>"),is=(e,t)=>t(!1),as=(e,t)=>t(!1),os=ce('<dialog id="configModal" class="modal z-50"><div class="modal-box flex flex-col items-center gap-5 h-1/2"><p class="text-4xl">Settings</p> <div class="flex flex-col items-center grow-1 justify-center w-1/1"><div class="grid grid-cols-2 gap-5 w-1/1"><p class="flex items-center justify-center">Proxy Backend</p> <div class="dropdown"><div tabindex="0" role="button" class="btn m-1 w-1/1"> </div> <ul class="dropdown-content menu bg-base-100 rounded-box p-2 shadow-sm w-1/1"><li><button>Wisp</button></li> <li><button>Bare</button></li></ul></div> <p class="flex items-center justify-center">Proxy Server</p> <div class="dropdown"><div tabindex="0" role="button" class="btn m-1 w-1/1"> </div> <ul class="dropdown-content menu bg-base-100 rounded-box p-2 shadow-sm w-1/1 block overflow-y-scroll max-h-30"></ul></div> <p class="flex items-center justify-center">Custom Proxy URL</p> <input class="input w-1/1"/></div></div> <button class="btn">Close</button></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>');function ls(e,t){Oe(t,!0);let r=es(t,"isConfigOpen"),n=P(void 0);St(()=>{r()?w(n).showModal():w(n).close()});var i=os(),s=C(i),a=M(C(s),2),u=C(a),l=M(C(u),2),f=C(l),c=C(f),d=M(f,2),o=C(d),v=C(o);v.__click=()=>{E.useBare=!1,document.activeElement.blur()};var h=M(o,2),_=C(h);_.__click=()=>{E.useBare=!0,document.activeElement.blur()};var p=M(l,4),k=C(p),g=C(k),m=M(k,2);Yn(m,21,()=>Object.entries(E.useBare?ct:vt),$n,(B,W)=>{var me=Ge(()=>Gr(w(W),2));let de=()=>w(me)[0],be=()=>w(me)[1];var Ne=ss(),Ie=C(Ne);Ie.__click=()=>{E.useBare?E.bareSelectedProxy=de():E.wispSelectedProxy=de(),document.activeElement.blur()};var Ze=C(Ie);Ce(()=>et(Ze,be())),X(B,Ne)});var T=M(p,4),S=M(a,2);S.__click=[is,r];var se=M(s,2),ve=C(se);ve.__click=[as,r],Ut(i,B=>x(n,B),()=>w(n)),Ce(()=>{et(c,E.useBare?"Bare":"Wisp"),et(g,E.useBare?ct[E.bareSelectedProxy]:vt[E.wispSelectedProxy])}),Tr("close",i,()=>r(!1)),Rr(T,()=>E.useBare?E.bareCustomProxy:E.wispCustomProxy,B=>{E.useBare?E.bareCustomProxy=B:E.wispCustomProxy=B}),X(e,i),Ue()}At(["click"]);const Ht=globalThis.SharedWorker,$t=globalThis.localStorage,us=globalThis.navigator.serviceWorker,V=MessagePort.prototype.postMessage;async function dt(){const e=(await self.clients.matchAll({type:"window",includeUncontrolled:!0})).map(async r=>{const n=await function(i){let s=new MessageChannel;return new Promise(a=>{i.postMessage({type:"getPort",port:s.port2},[s.port2]),s.port1.onmessage=u=>{a(u.data)}})}(r);return await Nr(n),n}),t=Promise.race([Promise.any(e),new Promise((r,n)=>setTimeout(n,1e3,new TypeError("timeout")))]);try{return await t}catch(r){if(r instanceof AggregateError)throw console.error("bare-mux: failed to get a bare-mux SharedWorker MessagePort as all clients returned an invalid MessagePort."),new Error("All clients returned an invalid MessagePort.");return console.warn("bare-mux: failed to get a bare-mux SharedWorker MessagePort within 1s, retrying"),await dt()}}function Nr(e){const t=new MessageChannel,r=new Promise((n,i)=>{t.port1.onmessage=s=>{s.data.type==="pong"&&n()},setTimeout(i,1500)});return V.call(e,{message:{type:"ping"},port:t.port2},[t.port2]),r}function zt(e,t){const r=new Ht(e,"bare-mux-worker");return t&&us.addEventListener("message",n=>{if(n.data.type==="getPort"&&n.data.port){console.debug("bare-mux: recieved request for port from sw");const i=new Ht(e,"bare-mux-worker");V.call(n.data.port,i.port,[i.port])}}),r.port}let st=null;function fs(){if(st===null){const e=new MessageChannel,t=new ReadableStream;let r;try{V.call(e.port1,t,[t]),r=!0}catch{r=!1}return st=r,r}return st}class cs{constructor(t){this.channel=new BroadcastChannel("bare-mux"),t instanceof MessagePort||t instanceof Promise?this.port=t:this.createChannel(t,!0)}createChannel(t,r){if(self.clients)this.port=dt(),this.channel.onmessage=n=>{n.data.type==="refreshPort"&&(this.port=dt())};else if(t&&SharedWorker){if(!t.startsWith("/")&&!t.includes("://"))throw new Error("Invalid URL. Must be absolute or start at the root.");this.port=zt(t,r),console.debug("bare-mux: setting localStorage bare-mux-path to",t),$t["bare-mux-path"]=t}else{if(!SharedWorker)throw new Error("Unable to get a channel to the SharedWorker.");{const n=$t["bare-mux-path"];if(console.debug("bare-mux: got localStorage bare-mux-path:",n),!n)throw new Error("Unable to get bare-mux workerPath from localStorage.");this.port=zt(n,r)}}}async sendMessage(t,r){this.port instanceof Promise&&(this.port=await this.port);try{await Nr(this.port)}catch{return console.warn("bare-mux: Failed to get a ping response from the worker within 1.5s. Assuming port is dead."),this.createChannel(),await this.sendMessage(t,r)}const n=new MessageChannel,i=[n.port2,...r||[]],s=new Promise((a,u)=>{n.port1.onmessage=l=>{const f=l.data;f.type==="error"?u(f.error):a(f)}});return V.call(this.port,{message:t,port:n.port2},i),await s}}function Yt(e,t,r){console.error(`error while processing '${r}': `,t),e.postMessage({type:"error",error:t})}class vs{constructor(t){this.worker=new cs(t)}async getTransport(){return(await this.worker.sendMessage({type:"get"})).name}async setTransport(t,r,n){await this.setManualTransport(`
			const { default: BareTransport } = await import("${t}");
			return [BareTransport, "${t}"];
		`,r,n)}async setManualTransport(t,r,n){if(t==="bare-mux-remote")throw new Error("Use setRemoteTransport.");await this.worker.sendMessage({type:"set",client:{function:t,args:r}},n)}async setRemoteTransport(t,r){const n=new MessageChannel;n.port1.onmessage=async i=>{const s=i.data.port,a=i.data.message;if(a.type==="fetch")try{t.ready||await t.init(),await async function(u,l,f){const c=await f.request(new URL(u.fetch.remote),u.fetch.method,u.fetch.body,u.fetch.headers,null);if(!fs()&&c.body instanceof ReadableStream){const d=new Response(c.body);c.body=await d.arrayBuffer()}c.body instanceof ReadableStream||c.body instanceof ArrayBuffer?V.call(l,{type:"fetch",fetch:c},[c.body]):V.call(l,{type:"fetch",fetch:c})}(a,s,t)}catch(u){Yt(s,u,"fetch")}else if(a.type==="websocket")try{t.ready||await t.init(),await async function(u,l,f){const[c,d]=f.connect(new URL(u.websocket.url),u.websocket.protocols,u.websocket.requestHeaders,o=>{V.call(u.websocket.channel,{type:"open",args:[o]})},o=>{o instanceof ArrayBuffer?V.call(u.websocket.channel,{type:"message",args:[o]},[o]):V.call(u.websocket.channel,{type:"message",args:[o]})},(o,v)=>{V.call(u.websocket.channel,{type:"close",args:[o,v]})},o=>{V.call(u.websocket.channel,{type:"error",args:[o]})});u.websocket.channel.onmessage=o=>{o.data.type==="data"?c(o.data.data):o.data.type==="close"&&d(o.data.closeCode,o.data.closeReason)},V.call(l,{type:"websocket"})}(a,s,t)}catch(u){Yt(s,u,"websocket")}},await this.worker.sendMessage({type:"set",client:{function:"bare-mux-remote",args:[n.port2,r]}},[n.port2])}getInnerPort(){return this.worker.port}}console.debug("bare-mux: running v2.1.7 (build c56d286)");function ds(e){let t=new URL(e);return t.protocol=t.protocol==="http:"?"ws:":"wss:",t.toString()}function Ir(e){return t=>{t.key==="Enter"&&e()}}class hs{#t;get wispUrl(){return w(this.#t)}set wispUrl(t){x(this.#t,t,!0)}#e;get bareUrl(){return w(this.#e)}set bareUrl(t){x(this.#e,t,!0)}constructor(){this.#t=P(""),this.#e=P("")}async probeBare(){let t=[];for(const r in ct){let n=r;n==="auto"||n==="custom"||t.push(new Promise((i,s)=>{setTimeout(()=>{s("Failed to fetch bare on "+n)},E.probeTimeout),fetch(n).then(a=>{a.status==200?i(n):s("Bare returned error code "+a.status+" on url "+n)})}))}await Promise.any(t).then(r=>{this.bareUrl=r})}async probeWisp(){let t=[];for(const r in vt){let n=r;n==="auto"||n==="custom"||t.push(new Promise((i,s)=>{const a=new WebSocket(n);setTimeout(()=>{a.readyState==WebSocket.OPEN?(a.close(),i(n)):(a.close(),s("Failed to open websocket on "+n))},E.probeTimeout),a.onopen=()=>{a.close(),i(n)}}))}await Promise.any(t).then(r=>{this.wispUrl=r})}}const Ye=G(new hs);class ps{#t;get isProxyOpen(){return w(this.#t)}set isProxyOpen(t){x(this.#t,t,!0)}#e;get url(){return w(this.#e)}set url(t){x(this.#e,t,!0)}#n;get iframeUrl(){return w(this.#n)}set iframeUrl(t){x(this.#n,t,!0)}#r;get proxyUrl(){return w(this.#r)}set proxyUrl(t){x(this.#r,t)}constructor(){this.#t=P(!1),this.#e=P(""),this.#n=P(""),this.#r=Ge(()=>E.useBare?E.bareSelectedProxy==="auto"?Ye.bareUrl:E.bareSelectedProxy==="custom"?E.bareCustomProxy:E.bareSelectedProxy:E.wispSelectedProxy==="auto"?Ye.wispUrl:E.wispSelectedProxy==="custom"?E.wispCustomProxy:E.wispSelectedProxy)}reloadIframe(){this.iframeUrl=this.uvConfig.prefix+this.uvConfig.encodeUrl(this.url)}setDestination(t){if(t===""){this.url="https://duckduckgo.com";return}if(!t.includes(".")){this.url="https://duckduckgo.com/?q="+t;return}if(!t.startsWith("https://")&&!t.startsWith("http://")){this.url="https://"+t;return}this.url=t}async registerSW(){if(!navigator.serviceWorker)throw location.protocol!=="https:"&&!["localhost","127.0.0.1"].includes(location.hostname)?new Error("Service workers cannot be registered without https."):new Error("Your browser doesn't support service workers.");(await navigator.serviceWorker.getRegistrations()).some(t=>t.active!==null&&t.active.scriptURL==this.uvConfig.stockSW)||await navigator.serviceWorker.register(this.uvConfig.stockSW)}async startProxy(){const t=this.uvConfig.loc;this.bareMuxConnection==null&&(this.bareMuxConnection=new vs(t+"/baremux/worker.js")),await this.registerSW(),E.useBare?await this.bareMuxConnection.setTransport(t+"/baremod/index.mjs",[this.proxyUrl]):await this.bareMuxConnection.setTransport(t+"/libcurl/index.mjs",[{wisp:ds(this.proxyUrl)}]),this.reloadIframe()}}const A=G(new ps);class _s{constructor(){this.history=[],this.idx=-1}addToHistory(t){this.getCurrent()!==t&&(this.idx+=1,this.history.length!==0&&(this.history=this.history.slice(0,this.idx)),this.history.push(t))}getCurrent(){return this.history[this.idx]}goForward(){return this.idx>=this.history.length-1?null:(this.idx+=1,this.getCurrent())}goBackward(){return this.idx<=0?null:(this.idx-=1,this.getCurrent())}}var ws=(e,t,r)=>t(r.goBackward()),gs=(e,t,r)=>t(r.goForward()),ms=(e,t)=>t.iframe.contentWindow.location.reload(),bs=(e,t)=>x(t,!1),ys=ce('<div class="fixed top-0 w-screen flex flex-row gap-1 z-50 p-2"><div><button class="btn btn-square" title="Back">￩</button> <button class="btn btn-square" title="Forward">￫</button> <button class="btn btn-square" title="Reload">⟳</button></div> <input type="text" class="input flex grow-1" id="urlBar"/> <div><button class="btn btn-square" title="Close proxy">×</button> <button class="btn btn-square" title="Close navbar">↑</button></div></div>'),xs=(e,t)=>x(t,!0),ks=ce('<button class="btn btn-square fixed top-0 right-1 z-50" title="Open navbar">↓</button>');function Es(e,t){Oe(t,!0);let r=P(!1),n=P(void 0),i=new _s;St(()=>{i.addToHistory(A.url)});function s(c){c!=null&&(A.url=c,A.reloadIframe())}var a=Mr(),u=lt(a);{var l=c=>{var d=ys(),o=C(d),v=C(o);v.__click=[ws,s,i];var h=M(v,2);h.__click=[gs,s,i];var _=M(h,2);_.__click=[ms,t];var p=M(o,2),k=Ge(()=>Ir(()=>{A.setDestination(w(n).value),A.reloadIframe()}));p.__keydown=function(...S){w(k)?.apply(this,S)},Ut(p,S=>x(n,S),()=>w(n));var g=M(p,2),m=C(g);m.__click=()=>A.isProxyOpen=!1;var T=M(m,2);T.__click=[bs,r],Ce(()=>Xn(p,A.url)),X(c,d)},f=c=>{var d=ks();d.__click=[xs,r],X(c,d)};Ot(u,c=>{w(r)?c(l):c(f,!1)})}X(e,a),Ue()}At(["click","keydown"]);var Ps=ce('<div class="bg-base-200 w-full h-full flex flex-row align-center justify-center"><span class="loading loading-spinner loading-xl"></span></div>'),Ss=ce('<div class="w-screen h-screen fixed top-0 left-0"><!> <iframe title="Proxy" class="w-full h-full"></iframe> <!></div>');function Cs(e,t){Oe(t,!0);let r=P(void 0),n=P(!1);const i="accelerometer ambient-light-sensor attribution-reporting autoplay bluetooth browsing-topics camera compute-pressure cross-origin-isolated display-capture document-domain encrypted-media fullscreen gamepad geolocation gyroscope hid identity-credentials-get idle-detection local-fonts magnetometer microphone midi otp-credentials payment picture-in-picture publickey-credentials-create publickey-credentials-get screen-wake-lock serial speaker-selection storage-access usb web-share window-management xr-spatial-tracking",s="allow-popups allow-popups-to-escape-sandbox allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-same-origin allow-scripts allow-storage-access-by-user-activation";function a(){x(n,!0);const o=w(r).contentWindow.location.pathname;o.includes(A.uvConfig.prefix)&&(A.url=A.uvConfig.decodeUrl(o.slice(A.uvConfig.prefix.length)))}var u=Ss(),l=C(u);{var f=o=>{var v=Ps();X(o,v)};Ot(l,o=>{w(n)||o(f)})}var c=M(l,2);De(c,"allow",i),De(c,"sandbox",s),Ut(c,o=>x(r,o),()=>w(r));var d=M(c,2);Es(d,{get iframe(){return w(r)}}),Ce(()=>De(c,"src",A.iframeUrl)),Tr("load",c,a),X(e,u),Ue()}var Ts=(e,t)=>x(t,!0),Ms=ce('<!> <div class="w-screen h-screen flex flex-col items-center p-10"><picture class="w-1/2 grow-1"><source srcset="img/corn-dark.svg" media="(prefers-color-scheme: dark)" class="w-full h-full"/> <img class="w-full h-full" src="img/corn.svg" alt="Corn Unblocked"/></picture> <div class="flex flex-col grow-1 gap-10 w-full items-center"><input type="text" class="input w-1/2" title="Destination URL" placeholder="Enter a URL or search the web"/> <span class="tooltip w-1/8"><button class="btn w-1/1 pointer-events-auto" title="Start proxy">Start</button></span></div> <div class="flex flex-row w-1/3 justify-evenly"><button class="btn w-4/9" title="Open settings">Settings</button> <button class="btn w-4/9" title="Usage help">Help</button></div></div>',1);function As(e,t){Oe(t,!0),Ye.probeBare(),Ye.probeWisp(),St(()=>{rs(E)});let r=P(""),n=P(!1);function i(){A.proxyUrl!==""&&(A.setDestination(w(r)),A.startProxy(),A.isProxyOpen=!0)}var s=Mr(),a=lt(s);{var u=f=>{Cs(f,{})},l=f=>{var c=Ms(),d=lt(c);ls(d,{get isConfigOpen(){return w(n)},set isConfigOpen(S){x(n,S,!0)}});var o=M(d,2),v=M(C(o),2),h=C(v),_=Ge(()=>Ir(i));h.__keydown=function(...S){w(_)?.apply(this,S)};var p=M(h,2),k=C(p);k.__click=i;var g=M(v,2),m=C(g);m.__click=[Ts,n];var T=M(m,2);T.__click=function(...S){window.open.bind(window,"https://sites.google.com/view/cornunblocked/help/usage")?.apply(this,S)},Ce(()=>{De(p,"data-tip",A.proxyUrl===""?"Proxy URL not found! Go to settings and configure proxy server":""),k.disabled=A.proxyUrl===""}),Rr(h,()=>w(r),S=>x(r,S)),X(f,c)};Ot(a,f=>{A.isProxyOpen?f(u):f(l,!1)})}X(e,s),Ue()}At(["keydown","click"]);A.uvConfig=__uv$config;Vn(As,{target:document.getElementById("app")});
