(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))f(v);new MutationObserver(v=>{for(const _ of v)if(_.type==="childList")for(const g of _.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function n(v){const _={};return v.integrity&&(_.integrity=v.integrity),v.referrerPolicy&&(_.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?_.credentials="include":v.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function f(v){if(v.ep)return;v.ep=!0;const _=n(v);fetch(v.href,_)}})();const PUBLIC_VERSION="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(PUBLIC_VERSION);const EACH_ITEM_REACTIVE=1,EACH_INDEX_REACTIVE=2,EACH_ITEM_IMMUTABLE=16,TEMPLATE_FRAGMENT=1,TEMPLATE_USE_IMPORT_NODE=2,UNINITIALIZED=Symbol(),NAMESPACE_HTML="http://www.w3.org/1999/xhtml",DEV=!1;var is_array=Array.isArray,index_of=Array.prototype.indexOf,array_from=Array.from,define_property=Object.defineProperty,get_descriptor=Object.getOwnPropertyDescriptor,get_descriptors=Object.getOwnPropertyDescriptors,object_prototype=Object.prototype,array_prototype=Array.prototype,get_prototype_of=Object.getPrototypeOf,is_extensible=Object.isExtensible;function run_all(e){for(var t=0;t<e.length;t++)e[t]()}function deferred(){var e,t,n=new Promise((f,v)=>{e=f,t=v});return{promise:n,resolve:e,reject:t}}function to_array(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const f of e)if(n.push(f),n.length===t)break;return n}const DERIVED=2,EFFECT=4,RENDER_EFFECT=8,BLOCK_EFFECT=16,BRANCH_EFFECT=32,ROOT_EFFECT=64,BOUNDARY_EFFECT=128,UNOWNED=256,DISCONNECTED=512,CLEAN=1024,DIRTY=2048,MAYBE_DIRTY=4096,INERT=8192,DESTROYED=16384,EFFECT_RAN=32768,EFFECT_TRANSPARENT=65536,INSPECT_EFFECT=1<<17,HEAD_EFFECT=1<<18,EFFECT_PRESERVED=1<<19,USER_EFFECT=1<<20,REACTION_IS_UPDATING=1<<21,ASYNC=1<<22,ERROR_VALUE=1<<23,STATE_SYMBOL=Symbol("$state"),LEGACY_PROPS=Symbol("legacy props"),LOADING_ATTR_SYMBOL=Symbol(""),STALE_REACTION=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function await_outside_boundary(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function async_derived_orphan(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function effect_in_teardown(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function effect_in_unowned_derived(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function effect_orphan(e){throw new Error("https://svelte.dev/e/effect_orphan")}function effect_update_depth_exceeded(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function state_descriptors_fixed(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function state_prototype_fixed(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function state_unsafe_mutation(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let hydrating=!1;function equals(e){return e===this.v}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function safe_equals(e){return!safe_not_equal(e,this.v)}let tracing_mode_flag=!1,component_context=null;function set_component_context(e){component_context=e}function push(e,t=!1,n){component_context={p:component_context,c:null,e:null,s:e,x:null,l:null}}function pop(e){var t=component_context,n=t.e;if(n!==null){t.e=null;for(var f of n)create_user_effect(f)}return component_context=t.p,{}}function is_runes(){return!0}const adjustments=new WeakMap;function handle_error(e){var t=active_effect;if(t===null)return active_reaction.f|=ERROR_VALUE,e;if((t.f&EFFECT_RAN)===0){if((t.f&BOUNDARY_EFFECT)===0)throw!t.parent&&e instanceof Error&&apply_adjustments(e),e;t.b.error(e)}else invoke_error_boundary(e,t)}function invoke_error_boundary(e,t){for(;t!==null;){if((t.f&BOUNDARY_EFFECT)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&apply_adjustments(e),e}function apply_adjustments(e){const t=adjustments.get(e);t&&(define_property(e,"message",{value:t.message}),define_property(e,"stack",{value:t.stack}))}let micro_tasks=[];function run_micro_tasks(){var e=micro_tasks;micro_tasks=[],run_all(e)}function queue_micro_task(e){micro_tasks.length===0&&queueMicrotask(run_micro_tasks),micro_tasks.push(e)}function get_pending_boundary(){for(var e=active_effect.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&await_outside_boundary(),e}function derived(e){var t=DERIVED|DIRTY,n=active_reaction!==null&&(active_reaction.f&DERIVED)!==0?active_reaction:null;return active_effect===null||n!==null&&(n.f&UNOWNED)!==0?t|=UNOWNED:active_effect.f|=EFFECT_PRESERVED,{ctx:component_context,deps:null,effects:null,equals,f:t,fn:e,reactions:null,rv:0,v:UNINITIALIZED,wv:0,parent:n??active_effect,ac:null}}function async_derived(e,t){let n=active_effect;n===null&&async_derived_orphan();var f=n.b,v=void 0,_=source(UNINITIALIZED),g=null,w=!active_reaction;return async_effect(()=>{try{var b=e()}catch(T){b=Promise.reject(T)}var y=()=>b;v=g?.then(y,y)??Promise.resolve(b),g=v;var x=current_batch,k=f.pending;w&&(f.update_pending_count(1),k||x.increment());const E=(T,C=void 0)=>{g=null,k||x.activate(),C?C!==STALE_REACTION&&(_.f|=ERROR_VALUE,internal_set(_,C)):((_.f&ERROR_VALUE)!==0&&(_.f^=ERROR_VALUE),internal_set(_,T)),w&&(f.update_pending_count(-1),k||x.decrement()),unset_context()};if(v.then(E,T=>E(null,T||"unknown")),x)return()=>{queueMicrotask(()=>x.neuter())}}),new Promise(b=>{function y(x){function k(){x===v?b(_):y(v)}x.then(k,k)}y(v)})}function user_derived(e){const t=derived(e);return push_reaction_value(t),t}function derived_safe_equal(e){const t=derived(e);return t.equals=safe_equals,t}function destroy_derived_effects(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)destroy_effect(t[n])}}function get_derived_parent_effect(e){for(var t=e.parent;t!==null;){if((t.f&DERIVED)===0)return t;t=t.parent}return null}function execute_derived(e){var t,n=active_effect;set_active_effect(get_derived_parent_effect(e));try{destroy_derived_effects(e),t=update_reaction(e)}finally{set_active_effect(n)}return t}function update_derived(e){var t=execute_derived(e);if(e.equals(t)||(e.v=t,e.wv=increment_write_version()),!is_destroying_effect)if(batch_deriveds!==null)batch_deriveds.set(e,e.v);else{var n=(skip_reaction||(e.f&UNOWNED)!==0)&&e.deps!==null?MAYBE_DIRTY:CLEAN;set_signal_status(e,n)}}function flatten(e,t,n){const f=derived;if(t.length===0){n(e.map(f));return}var v=current_batch,_=active_effect,g=capture(),w=get_pending_boundary();Promise.all(t.map(b=>async_derived(b))).then(b=>{v?.activate(),g();try{n([...e.map(f),...b])}catch(y){(_.f&DESTROYED)===0&&invoke_error_boundary(y,_)}v?.deactivate(),unset_context()}).catch(b=>{w.error(b)})}function capture(){var e=active_effect,t=active_reaction,n=component_context;return function(){set_active_effect(e),set_active_reaction(t),set_component_context(n)}}function unset_context(){set_active_effect(null),set_active_reaction(null),set_component_context(null)}const batches=new Set;let current_batch=null,batch_deriveds=null,effect_pending_updates=new Set,tasks=[];function dequeue(){const e=tasks.shift();tasks.length>0&&queueMicrotask(dequeue),e()}let queued_root_effects=[],last_scheduled_effect=null,is_flushing=!1;class Batch{#t=new Map;#e=new Map;#n=new Set;#r=0;#c=null;#u=!1;#a=[];#l=[];#i=[];#s=[];#o=[];skipped_effects=new Set;#_(t){queued_root_effects=[];var n=null;if(batches.size>1){n=new Map,batch_deriveds=new Map;for(const[_,g]of this.#t)n.set(_,{v:_.v,wv:_.wv}),_.v=g;for(const _ of batches)if(_!==this)for(const[g,w]of _.#e)n.has(g)||(n.set(g,{v:g.v,wv:g.wv}),g.v=w)}for(const _ of t)this.#d(_);if(this.#a.length===0&&this.#r===0){var f=this.#i,v=this.#s;this.#i=[],this.#s=[],this.#o=[],this.#f(),flush_queued_effects(f),flush_queued_effects(v),this.#c?.resolve()}else{for(const _ of this.#i)set_signal_status(_,CLEAN);for(const _ of this.#s)set_signal_status(_,CLEAN);for(const _ of this.#o)set_signal_status(_,CLEAN)}if(n){for(const[_,{v:g,wv:w}]of n)_.wv<=w&&(_.v=g);batch_deriveds=null}for(const _ of this.#a)update_effect(_);for(const _ of this.#l)update_effect(_);this.#a=[],this.#l=[]}#d(t){t.f^=CLEAN;for(var n=t.first;n!==null;){var f=n.f,v=(f&(BRANCH_EFFECT|ROOT_EFFECT))!==0,_=v&&(f&CLEAN)!==0,g=_||(f&INERT)!==0||this.skipped_effects.has(n);if(!g&&n.fn!==null){if(v)n.f^=CLEAN;else if((f&EFFECT)!==0)this.#s.push(n);else if(is_dirty(n))if((f&ASYNC)!==0){var w=n.b?.pending?this.#l:this.#a;w.push(n)}else(n.f&BLOCK_EFFECT)!==0&&this.#o.push(n),update_effect(n);var b=n.first;if(b!==null){n=b;continue}}var y=n.parent;for(n=n.next;n===null&&y!==null;)n=y.next,y=y.parent}}capture(t,n){this.#e.has(t)||this.#e.set(t,n),this.#t.set(t,t.v)}activate(){current_batch=this}deactivate(){current_batch=null;for(const t of effect_pending_updates)if(effect_pending_updates.delete(t),t(),current_batch!==null)break}neuter(){this.#u=!0}flush(){queued_root_effects.length>0?this.flush_effects():this.#f(),current_batch===this&&(this.#r===0&&batches.delete(this),this.deactivate())}flush_effects(){var t=is_updating_effect;is_flushing=!0;try{var n=0;for(set_is_updating_effect(!0);queued_root_effects.length>0;){if(n++>1e3){var f,v;infinite_loop_guard()}this.#_(queued_root_effects),old_values.clear()}}finally{is_flushing=!1,set_is_updating_effect(t),last_scheduled_effect=null}}#f(){if(!this.#u)for(const t of this.#n)t();this.#n.clear()}increment(){this.#r+=1}decrement(){if(this.#r-=1,this.#r===0){for(const t of this.#i)set_signal_status(t,DIRTY),schedule_effect(t);for(const t of this.#s)set_signal_status(t,DIRTY),schedule_effect(t);for(const t of this.#o)set_signal_status(t,DIRTY),schedule_effect(t);this.#i=[],this.#s=[],this.flush()}else this.deactivate()}add_callback(t){this.#n.add(t)}settled(){return(this.#c??=deferred()).promise}static ensure(t=!0){if(current_batch===null){const n=current_batch=new Batch;batches.add(current_batch),t&&Batch.enqueue(()=>{current_batch===n&&n.flush()})}return current_batch}static enqueue(t){tasks.length===0&&queueMicrotask(dequeue),tasks.unshift(t)}}function infinite_loop_guard(){try{effect_update_depth_exceeded()}catch(e){invoke_error_boundary(e,last_scheduled_effect)}}function flush_queued_effects(e){var t=e.length;if(t!==0){for(var n=0;n<t;n++){var f=e[n];if((f.f&(DESTROYED|INERT))===0&&is_dirty(f)){var v=write_version;if(update_effect(f),f.deps===null&&f.first===null&&f.nodes_start===null&&(f.teardown===null&&f.ac===null?unlink_effect(f):f.fn=null),write_version>v&&(f.f&USER_EFFECT)!==0)break}}for(;n<t;n+=1)schedule_effect(e[n])}}function schedule_effect(e){for(var t=last_scheduled_effect=e;t.parent!==null;){t=t.parent;var n=t.f;if(is_flushing&&t===active_effect&&(n&BLOCK_EFFECT)!==0)return;if((n&(ROOT_EFFECT|BRANCH_EFFECT))!==0){if((n&CLEAN)===0)return;t.f^=CLEAN}}queued_root_effects.push(t)}const old_values=new Map;function source(e,t){var n={f:0,v:e,reactions:null,equals,rv:0,wv:0};return n}function state(e,t){const n=source(e);return push_reaction_value(n),n}function mutable_source(e,t=!1,n=!0){const f=source(e);return t||(f.equals=safe_equals),f}function set(e,t,n=!1){active_reaction!==null&&(!untracking||(active_reaction.f&INSPECT_EFFECT)!==0)&&is_runes()&&(active_reaction.f&(DERIVED|BLOCK_EFFECT|ASYNC|INSPECT_EFFECT))!==0&&!current_sources?.includes(e)&&state_unsafe_mutation();let f=n?proxy(t):t;return internal_set(e,f)}function internal_set(e,t){if(!e.equals(t)){var n=e.v;is_destroying_effect?old_values.set(e,t):old_values.set(e,n),e.v=t,Batch.ensure().capture(e,n),(e.f&DERIVED)!==0&&((e.f&DIRTY)!==0&&execute_derived(e),set_signal_status(e,(e.f&UNOWNED)===0?CLEAN:MAYBE_DIRTY)),e.wv=increment_write_version(),mark_reactions(e,DIRTY),active_effect!==null&&(active_effect.f&CLEAN)!==0&&(active_effect.f&(BRANCH_EFFECT|ROOT_EFFECT))===0&&(untracked_writes===null?set_untracked_writes([e]):untracked_writes.push(e))}return t}function increment(e){set(e,e.v+1)}function mark_reactions(e,t){var n=e.reactions;if(n!==null)for(var f=n.length,v=0;v<f;v++){var _=n[v],g=_.f;(g&DIRTY)===0&&set_signal_status(_,t),(g&DERIVED)!==0?mark_reactions(_,MAYBE_DIRTY):(g&DIRTY)===0&&schedule_effect(_)}}function proxy(e){if(typeof e!="object"||e===null||STATE_SYMBOL in e)return e;const t=get_prototype_of(e);if(t!==object_prototype&&t!==array_prototype)return e;var n=new Map,f=is_array(e),v=state(0),_=update_version,g=w=>{if(update_version===_)return w();var b=active_reaction,y=update_version;set_active_reaction(null),set_update_version(_);var x=w();return set_active_reaction(b),set_update_version(y),x};return f&&n.set("length",state(e.length)),new Proxy(e,{defineProperty(w,b,y){(!("value"in y)||y.configurable===!1||y.enumerable===!1||y.writable===!1)&&state_descriptors_fixed();var x=n.get(b);return x===void 0?x=g(()=>{var k=state(y.value);return n.set(b,k),k}):set(x,y.value,!0),!0},deleteProperty(w,b){var y=n.get(b);if(y===void 0){if(b in w){const x=g(()=>state(UNINITIALIZED));n.set(b,x),increment(v)}}else set(y,UNINITIALIZED),increment(v);return!0},get(w,b,y){if(b===STATE_SYMBOL)return e;var x=n.get(b),k=b in w;if(x===void 0&&(!k||get_descriptor(w,b)?.writable)&&(x=g(()=>{var T=proxy(k?w[b]:UNINITIALIZED),C=state(T);return C}),n.set(b,x)),x!==void 0){var E=get(x);return E===UNINITIALIZED?void 0:E}return Reflect.get(w,b,y)},getOwnPropertyDescriptor(w,b){var y=Reflect.getOwnPropertyDescriptor(w,b);if(y&&"value"in y){var x=n.get(b);x&&(y.value=get(x))}else if(y===void 0){var k=n.get(b),E=k?.v;if(k!==void 0&&E!==UNINITIALIZED)return{enumerable:!0,configurable:!0,value:E,writable:!0}}return y},has(w,b){if(b===STATE_SYMBOL)return!0;var y=n.get(b),x=y!==void 0&&y.v!==UNINITIALIZED||Reflect.has(w,b);if(y!==void 0||active_effect!==null&&(!x||get_descriptor(w,b)?.writable)){y===void 0&&(y=g(()=>{var E=x?proxy(w[b]):UNINITIALIZED,T=state(E);return T}),n.set(b,y));var k=get(y);if(k===UNINITIALIZED)return!1}return x},set(w,b,y,x){var k=n.get(b),E=b in w;if(f&&b==="length")for(var T=y;T<k.v;T+=1){var C=n.get(T+"");C!==void 0?set(C,UNINITIALIZED):T in w&&(C=g(()=>state(UNINITIALIZED)),n.set(T+"",C))}if(k===void 0)(!E||get_descriptor(w,b)?.writable)&&(k=g(()=>state(void 0)),set(k,proxy(y)),n.set(b,k));else{E=k.v!==UNINITIALIZED;var N=g(()=>proxy(y));set(k,N)}var I=Reflect.getOwnPropertyDescriptor(w,b);if(I?.set&&I.set.call(x,y),!E){if(f&&typeof b=="string"){var A=n.get("length"),R=Number(b);Number.isInteger(R)&&R>=A.v&&set(A,R+1)}increment(v)}return!0},ownKeys(w){get(v);var b=Reflect.ownKeys(w).filter(k=>{var E=n.get(k);return E===void 0||E.v!==UNINITIALIZED});for(var[y,x]of n)x.v!==UNINITIALIZED&&!(y in w)&&b.push(y);return b},setPrototypeOf(){state_prototype_fixed()}})}var $window,is_firefox,first_child_getter,next_sibling_getter;function init_operations(){if($window===void 0){$window=window,is_firefox=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;first_child_getter=get_descriptor(t,"firstChild").get,next_sibling_getter=get_descriptor(t,"nextSibling").get,is_extensible(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),is_extensible(n)&&(n.__t=void 0)}}function create_text(e=""){return document.createTextNode(e)}function get_first_child(e){return first_child_getter.call(e)}function get_next_sibling(e){return next_sibling_getter.call(e)}function child(e,t){return get_first_child(e)}function first_child(e,t){{var n=get_first_child(e);return n instanceof Comment&&n.data===""?get_next_sibling(n):n}}function sibling(e,t=1,n=!1){let f=e;for(;t--;)f=get_next_sibling(f);return f}function clear_text_content(e){e.textContent=""}function should_defer_append(){return!1}function validate_effect(e){active_effect===null&&active_reaction===null&&effect_orphan(),active_reaction!==null&&(active_reaction.f&UNOWNED)!==0&&active_effect===null&&effect_in_unowned_derived(),is_destroying_effect&&effect_in_teardown()}function push_effect(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function create_effect(e,t,n,f=!0){var v=active_effect;v!==null&&(v.f&INERT)!==0&&(e|=INERT);var _={ctx:component_context,deps:null,nodes_start:null,nodes_end:null,f:e|DIRTY,first:null,fn:t,last:null,next:null,parent:v,b:v&&v.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{update_effect(_),_.f|=EFFECT_RAN}catch(b){throw destroy_effect(_),b}else t!==null&&schedule_effect(_);var g=n&&_.deps===null&&_.first===null&&_.nodes_start===null&&_.teardown===null&&(_.f&EFFECT_PRESERVED)===0;if(!g&&f&&(v!==null&&push_effect(_,v),active_reaction!==null&&(active_reaction.f&DERIVED)!==0)){var w=active_reaction;(w.effects??=[]).push(_)}return _}function teardown(e){const t=create_effect(RENDER_EFFECT,null,!1);return set_signal_status(t,CLEAN),t.teardown=e,t}function user_effect(e){validate_effect();var t=active_effect.f,n=!active_reaction&&(t&BRANCH_EFFECT)!==0&&(t&EFFECT_RAN)===0;if(n){var f=component_context;(f.e??=[]).push(e)}else return create_user_effect(e)}function create_user_effect(e){return create_effect(EFFECT|USER_EFFECT,e,!1)}function component_root(e){Batch.ensure();const t=create_effect(ROOT_EFFECT,e,!0);return(n={})=>new Promise(f=>{n.outro?pause_effect(t,()=>{destroy_effect(t),f(void 0)}):(destroy_effect(t),f(void 0))})}function effect(e){return create_effect(EFFECT,e,!1)}function async_effect(e){return create_effect(ASYNC|EFFECT_PRESERVED,e,!0)}function render_effect(e,t=0){return create_effect(RENDER_EFFECT|t,e,!0)}function template_effect(e,t=[],n=[]){flatten(t,n,f=>{create_effect(RENDER_EFFECT,()=>e(...f.map(get)),!0)})}function block(e,t=0){var n=create_effect(BLOCK_EFFECT|t,e,!0);return n}function branch(e,t=!0){return create_effect(BRANCH_EFFECT,e,!0,t)}function execute_effect_teardown(e){var t=e.teardown;if(t!==null){const n=is_destroying_effect,f=active_reaction;set_is_destroying_effect(!0),set_active_reaction(null);try{t.call(null)}finally{set_is_destroying_effect(n),set_active_reaction(f)}}}function destroy_effect_children(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){n.ac?.abort(STALE_REACTION);var f=n.next;(n.f&ROOT_EFFECT)!==0?n.parent=null:destroy_effect(n,t),n=f}}function destroy_block_effect_children(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&BRANCH_EFFECT)===0&&destroy_effect(t),t=n}}function destroy_effect(e,t=!0){var n=!1;(t||(e.f&HEAD_EFFECT)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(remove_effect_dom(e.nodes_start,e.nodes_end),n=!0),destroy_effect_children(e,t&&!n),remove_reactions(e,0),set_signal_status(e,DESTROYED);var f=e.transitions;if(f!==null)for(const _ of f)_.stop();execute_effect_teardown(e);var v=e.parent;v!==null&&v.first!==null&&unlink_effect(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function remove_effect_dom(e,t){for(;e!==null;){var n=e===t?null:get_next_sibling(e);e.remove(),e=n}}function unlink_effect(e){var t=e.parent,n=e.prev,f=e.next;n!==null&&(n.next=f),f!==null&&(f.prev=n),t!==null&&(t.first===e&&(t.first=f),t.last===e&&(t.last=n))}function pause_effect(e,t){var n=[];pause_children(e,n,!0),run_out_transitions(n,()=>{destroy_effect(e),t&&t()})}function run_out_transitions(e,t){var n=e.length;if(n>0){var f=()=>--n||t();for(var v of e)v.out(f)}else t()}function pause_children(e,t,n){if((e.f&INERT)===0){if(e.f^=INERT,e.transitions!==null)for(const g of e.transitions)(g.is_global||n)&&t.push(g);for(var f=e.first;f!==null;){var v=f.next,_=(f.f&EFFECT_TRANSPARENT)!==0||(f.f&BRANCH_EFFECT)!==0;pause_children(f,t,_?n:!1),f=v}}}function resume_effect(e){resume_children(e,!0)}function resume_children(e,t){if((e.f&INERT)!==0){e.f^=INERT,(e.f&CLEAN)===0&&(set_signal_status(e,DIRTY),schedule_effect(e));for(var n=e.first;n!==null;){var f=n.next,v=(n.f&EFFECT_TRANSPARENT)!==0||(n.f&BRANCH_EFFECT)!==0;resume_children(n,v?t:!1),n=f}if(e.transitions!==null)for(const _ of e.transitions)(_.is_global||t)&&_.in()}}let is_updating_effect=!1;function set_is_updating_effect(e){is_updating_effect=e}let is_destroying_effect=!1;function set_is_destroying_effect(e){is_destroying_effect=e}let active_reaction=null,untracking=!1;function set_active_reaction(e){active_reaction=e}let active_effect=null;function set_active_effect(e){active_effect=e}let current_sources=null;function push_reaction_value(e){active_reaction!==null&&(current_sources===null?current_sources=[e]:current_sources.push(e))}let new_deps=null,skipped_deps=0,untracked_writes=null;function set_untracked_writes(e){untracked_writes=e}let write_version=1,read_version=0,update_version=read_version;function set_update_version(e){update_version=e}let skip_reaction=!1;function increment_write_version(){return++write_version}function is_dirty(e){var t=e.f;if((t&DIRTY)!==0)return!0;if((t&MAYBE_DIRTY)!==0){var n=e.deps,f=(t&UNOWNED)!==0;if(n!==null){var v,_,g=(t&DISCONNECTED)!==0,w=f&&active_effect!==null&&!skip_reaction,b=n.length;if((g||w)&&(active_effect===null||(active_effect.f&DESTROYED)===0)){var y=e,x=y.parent;for(v=0;v<b;v++)_=n[v],(g||!_?.reactions?.includes(y))&&(_.reactions??=[]).push(y);g&&(y.f^=DISCONNECTED),w&&x!==null&&(x.f&UNOWNED)===0&&(y.f^=UNOWNED)}for(v=0;v<b;v++)if(_=n[v],is_dirty(_)&&update_derived(_),_.wv>e.wv)return!0}(!f||active_effect!==null&&!skip_reaction)&&set_signal_status(e,CLEAN)}return!1}function schedule_possible_effect_self_invalidation(e,t,n=!0){var f=e.reactions;if(f!==null&&!current_sources?.includes(e))for(var v=0;v<f.length;v++){var _=f[v];(_.f&DERIVED)!==0?schedule_possible_effect_self_invalidation(_,t,!1):t===_&&(n?set_signal_status(_,DIRTY):(_.f&CLEAN)!==0&&set_signal_status(_,MAYBE_DIRTY),schedule_effect(_))}}function update_reaction(e){var t=new_deps,n=skipped_deps,f=untracked_writes,v=active_reaction,_=skip_reaction,g=current_sources,w=component_context,b=untracking,y=update_version,x=e.f;new_deps=null,skipped_deps=0,untracked_writes=null,skip_reaction=(x&UNOWNED)!==0&&(untracking||!is_updating_effect||active_reaction===null),active_reaction=(x&(BRANCH_EFFECT|ROOT_EFFECT))===0?e:null,current_sources=null,set_component_context(e.ctx),untracking=!1,update_version=++read_version,e.ac!==null&&(e.ac.abort(STALE_REACTION),e.ac=null);try{e.f|=REACTION_IS_UPDATING;var k=(0,e.fn)(),E=e.deps;if(new_deps!==null){var T;if(remove_reactions(e,skipped_deps),E!==null&&skipped_deps>0)for(E.length=skipped_deps+new_deps.length,T=0;T<new_deps.length;T++)E[skipped_deps+T]=new_deps[T];else e.deps=E=new_deps;if(!skip_reaction||(x&DERIVED)!==0&&e.reactions!==null)for(T=skipped_deps;T<E.length;T++)(E[T].reactions??=[]).push(e)}else E!==null&&skipped_deps<E.length&&(remove_reactions(e,skipped_deps),E.length=skipped_deps);if(is_runes()&&untracked_writes!==null&&!untracking&&E!==null&&(e.f&(DERIVED|MAYBE_DIRTY|DIRTY))===0)for(T=0;T<untracked_writes.length;T++)schedule_possible_effect_self_invalidation(untracked_writes[T],e);return v!==null&&v!==e&&(read_version++,untracked_writes!==null&&(f===null?f=untracked_writes:f.push(...untracked_writes))),(e.f&ERROR_VALUE)!==0&&(e.f^=ERROR_VALUE),k}catch(C){return handle_error(C)}finally{e.f^=REACTION_IS_UPDATING,new_deps=t,skipped_deps=n,untracked_writes=f,active_reaction=v,skip_reaction=_,current_sources=g,set_component_context(w),untracking=b,update_version=y}}function remove_reaction(e,t){let n=t.reactions;if(n!==null){var f=index_of.call(n,e);if(f!==-1){var v=n.length-1;v===0?n=t.reactions=null:(n[f]=n[v],n.pop())}}n===null&&(t.f&DERIVED)!==0&&(new_deps===null||!new_deps.includes(t))&&(set_signal_status(t,MAYBE_DIRTY),(t.f&(UNOWNED|DISCONNECTED))===0&&(t.f^=DISCONNECTED),destroy_derived_effects(t),remove_reactions(t,0))}function remove_reactions(e,t){var n=e.deps;if(n!==null)for(var f=t;f<n.length;f++)remove_reaction(e,n[f])}function update_effect(e){var t=e.f;if((t&DESTROYED)===0){set_signal_status(e,CLEAN);var n=active_effect,f=is_updating_effect;active_effect=e,is_updating_effect=!0;try{(t&BLOCK_EFFECT)!==0?destroy_block_effect_children(e):destroy_effect_children(e),execute_effect_teardown(e);var v=update_reaction(e);e.teardown=typeof v=="function"?v:null,e.wv=write_version;var _;DEV&&tracing_mode_flag&&(e.f&DIRTY)!==0&&e.deps}finally{is_updating_effect=f,active_effect=n}}}function get(e){var t=e.f,n=(t&DERIVED)!==0;if(active_reaction!==null&&!untracking){var f=active_effect!==null&&(active_effect.f&DESTROYED)!==0;if(!f&&!current_sources?.includes(e)){var v=active_reaction.deps;if((active_reaction.f&REACTION_IS_UPDATING)!==0)e.rv<read_version&&(e.rv=read_version,new_deps===null&&v!==null&&v[skipped_deps]===e?skipped_deps++:new_deps===null?new_deps=[e]:(!skip_reaction||!new_deps.includes(e))&&new_deps.push(e));else{(active_reaction.deps??=[]).push(e);var _=e.reactions;_===null?e.reactions=[active_reaction]:_.includes(active_reaction)||_.push(active_reaction)}}}else if(n&&e.deps===null&&e.effects===null){var g=e,w=g.parent;w!==null&&(w.f&UNOWNED)===0&&(g.f^=UNOWNED)}if(is_destroying_effect){if(old_values.has(e))return old_values.get(e);if(n){g=e;var b=g.v;return((g.f&CLEAN)===0&&g.reactions!==null||depends_on_old_values(g))&&(b=execute_derived(g)),old_values.set(g,b),b}}else if(n){if(g=e,batch_deriveds?.has(g))return batch_deriveds.get(g);is_dirty(g)&&update_derived(g)}if((e.f&ERROR_VALUE)!==0)throw e.v;return e.v}function depends_on_old_values(e){if(e.v===UNINITIALIZED)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(old_values.has(t)||(t.f&DERIVED)!==0&&depends_on_old_values(t))return!0;return!1}function untrack(e){var t=untracking;try{return untracking=!0,e()}finally{untracking=t}}const STATUS_MASK=-7169;function set_signal_status(e,t){e.f=e.f&STATUS_MASK|t}let listening_to_form_reset=!1;function add_form_reset_listener(){listening_to_form_reset||(listening_to_form_reset=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function without_reactive_context(e){var t=active_reaction,n=active_effect;set_active_reaction(null),set_active_effect(null);try{return e()}finally{set_active_reaction(t),set_active_effect(n)}}function listen_to_event_and_reset_event(e,t,n,f=n){e.addEventListener(t,()=>without_reactive_context(n));const v=e.__on_r;v?e.__on_r=()=>{v(),f(!0)}:e.__on_r=()=>f(!0),add_form_reset_listener()}const all_registered_events=new Set,root_event_handles=new Set;function create_event(e,t,n,f={}){function v(_){if(f.capture||handle_event_propagation.call(t,_),!_.cancelBubble)return without_reactive_context(()=>n?.call(this,_))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?queue_micro_task(()=>{t.addEventListener(e,v,f)}):t.addEventListener(e,v,f),v}function event(e,t,n,f,v){var _={capture:f,passive:v},g=create_event(e,t,n,_);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&teardown(()=>{t.removeEventListener(e,g,_)})}function delegate(e){for(var t=0;t<e.length;t++)all_registered_events.add(e[t]);for(var n of root_event_handles)n(e)}function handle_event_propagation(e){var t=this,n=t.ownerDocument,f=e.type,v=e.composedPath?.()||[],_=v[0]||e.target,g=0,w=e.__root;if(w){var b=v.indexOf(w);if(b!==-1&&(t===document||t===window)){e.__root=t;return}var y=v.indexOf(t);if(y===-1)return;b<=y&&(g=b)}if(_=v[g]||e.target,_!==t){define_property(e,"currentTarget",{configurable:!0,get(){return _||n}});var x=active_reaction,k=active_effect;set_active_reaction(null),set_active_effect(null);try{for(var E,T=[];_!==null;){var C=_.assignedSlot||_.parentNode||_.host||null;try{var N=_["__"+f];if(N!=null&&(!_.disabled||e.target===_))if(is_array(N)){var[I,...A]=N;I.apply(_,[e,...A])}else N.call(_,e)}catch(R){E?T.push(R):E=R}if(e.cancelBubble||C===t||C===null)break;_=C}if(E){for(let R of T)queueMicrotask(()=>{throw R});throw E}}finally{e.__root=t,delete e.currentTarget,set_active_reaction(x),set_active_effect(k)}}}function create_fragment_from_html(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function assign_nodes(e,t){var n=active_effect;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function from_html(e,t){var n=(t&TEMPLATE_FRAGMENT)!==0,f=(t&TEMPLATE_USE_IMPORT_NODE)!==0,v,_=!e.startsWith("<!>");return()=>{v===void 0&&(v=create_fragment_from_html(_?e:"<!>"+e),n||(v=get_first_child(v)));var g=f||is_firefox?document.importNode(v,!0):v.cloneNode(!0);if(n){var w=get_first_child(g),b=g.lastChild;assign_nodes(w,b)}else assign_nodes(g,g);return g}}function comment(){var e=document.createDocumentFragment(),t=document.createComment(""),n=create_text();return e.append(t,n),assign_nodes(t,n),e}function append(e,t){e!==null&&e.before(t)}const PASSIVE_EVENTS=["touchstart","touchmove"];function is_passive_event(e){return PASSIVE_EVENTS.includes(e)}function set_text(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function mount(e,t){return _mount(e,t)}const document_listeners=new Map;function _mount(e,{target:t,anchor:n,props:f={},events:v,context:_,intro:g=!0}){init_operations();var w=new Set,b=k=>{for(var E=0;E<k.length;E++){var T=k[E];if(!w.has(T)){w.add(T);var C=is_passive_event(T);t.addEventListener(T,handle_event_propagation,{passive:C});var N=document_listeners.get(T);N===void 0?(document.addEventListener(T,handle_event_propagation,{passive:C}),document_listeners.set(T,1)):document_listeners.set(T,N+1)}}};b(array_from(all_registered_events)),root_event_handles.add(b);var y=void 0,x=component_root(()=>{var k=n??t.appendChild(create_text());return branch(()=>{if(_){push({});var E=component_context;E.c=_}v&&(f.$$events=v),y=e(k,f)||{},_&&pop()}),()=>{for(var E of w){t.removeEventListener(E,handle_event_propagation);var T=document_listeners.get(E);--T===0?(document.removeEventListener(E,handle_event_propagation),document_listeners.delete(E)):document_listeners.set(E,T)}root_event_handles.delete(b),k!==n&&k.parentNode?.removeChild(k)}});return mounted_components.set(y,x),y}let mounted_components=new WeakMap;function if_block(e,t,n=!1){var f=e,v=null,_=null,g=UNINITIALIZED,w=n?EFFECT_TRANSPARENT:0,b=!1;const y=(T,C=!0)=>{b=!0,E(C,T)};var x=null;function k(){x!==null&&(x.lastChild.remove(),f.before(x),x=null);var T=g?v:_,C=g?_:v;T&&resume_effect(T),C&&pause_effect(C,()=>{g?_=null:v=null})}const E=(T,C)=>{if(g!==(g=T)){var N=should_defer_append(),I=f;if(N&&(x=document.createDocumentFragment(),x.append(I=create_text())),g?v??=C&&branch(()=>C(I)):_??=C&&branch(()=>C(I)),N){var A=current_batch,R=g?v:_,S=g?_:v;R&&A.skipped_effects.delete(R),S&&A.skipped_effects.add(S),A.add_callback(k)}else k()}};block(()=>{b=!1,t(y),b||E(null,null)},w)}function index(e,t){return t}function pause_effects(e,t,n){for(var f=e.items,v=[],_=t.length,g=0;g<_;g++)pause_children(t[g].e,v,!0);var w=_>0&&v.length===0&&n!==null;if(w){var b=n.parentNode;clear_text_content(b),b.append(n),f.clear(),link(e,t[0].prev,t[_-1].next)}run_out_transitions(v,()=>{for(var y=0;y<_;y++){var x=t[y];w||(f.delete(x.k),link(e,x.prev,x.next)),destroy_effect(x.e,!w)}})}function each(e,t,n,f,v,_=null){var g=e,w={flags:t,items:new Map,first:null};{var b=e;g=b.appendChild(create_text())}var y=null,x=!1,k=new Map,E=derived_safe_equal(()=>{var I=n();return is_array(I)?I:I==null?[]:array_from(I)}),T,C;function N(){reconcile(C,T,w,k,g,v,t,f,n),_!==null&&(T.length===0?y?resume_effect(y):y=branch(()=>_(g)):y!==null&&pause_effect(y,()=>{y=null}))}block(()=>{C??=active_effect,T=get(E);var I=T.length;if(!(x&&I===0)){x=I===0;var A,R,S,D;if(should_defer_append()){var P=new Set,M=current_batch;for(R=0;R<I;R+=1){S=T[R],D=f(S,R);var U=w.items.get(D)??k.get(D);U?update_item(U,S,R):(A=create_item(null,w,null,null,S,D,R,v,t,n,!0),k.set(D,A)),P.add(D)}for(const[O,F]of w.items)P.has(O)||M.skipped_effects.add(F.e);M.add_callback(N)}else N();get(E)}})}function reconcile(e,t,n,f,v,_,g,w,b){var y=t.length,x=n.items,k=n.first,E=k,T,C=null,N=[],I=[],A,R,S,D;for(D=0;D<y;D+=1){if(A=t[D],R=w(A,D),S=x.get(R),S===void 0){var P=f.get(R);if(P!==void 0){f.delete(R),x.set(R,P);var M=C?C.next:E;link(n,C,P),link(n,P,M),move(P,M,v),C=P}else{var U=E?E.e.nodes_start:v;C=create_item(U,n,C,C===null?n.first:C.next,A,R,D,_,g,b)}x.set(R,C),N=[],I=[],E=C.next;continue}if(update_item(S,A,D),(S.e.f&INERT)!==0&&resume_effect(S.e),S!==E){if(T!==void 0&&T.has(S)){if(N.length<I.length){var O=I[0],F;C=O.prev;var B=N[0],L=N[N.length-1];for(F=0;F<N.length;F+=1)move(N[F],O,v);for(F=0;F<I.length;F+=1)T.delete(I[F]);link(n,B.prev,L.next),link(n,C,B),link(n,L,O),E=O,C=L,D-=1,N=[],I=[]}else T.delete(S),move(S,E,v),link(n,S.prev,S.next),link(n,S,C===null?n.first:C.next),link(n,C,S),C=S;continue}for(N=[],I=[];E!==null&&E.k!==R;)(E.e.f&INERT)===0&&(T??=new Set).add(E),I.push(E),E=E.next;if(E===null)continue;S=E}N.push(S),C=S,E=S.next}if(E!==null||T!==void 0){for(var Y=T===void 0?[]:array_from(T);E!==null;)(E.e.f&INERT)===0&&Y.push(E),E=E.next;var V=Y.length;if(V>0){var q=y===0?v:null;pause_effects(n,Y,q)}}e.first=n.first&&n.first.e,e.last=C&&C.e;for(var W of f.values())destroy_effect(W.e);f.clear()}function update_item(e,t,n,f){internal_set(e.v,t),e.i=n}function create_item(e,t,n,f,v,_,g,w,b,y,x){var k=(b&EACH_ITEM_REACTIVE)!==0,E=(b&EACH_ITEM_IMMUTABLE)===0,T=k?E?mutable_source(v,!1,!1):source(v):v,C=(b&EACH_INDEX_REACTIVE)===0?g:source(g),N={i:C,v:T,k:_,a:null,e:null,prev:n,next:f};try{if(e===null){var I=document.createDocumentFragment();I.append(e=create_text())}return N.e=branch(()=>w(e,T,C,y),hydrating),N.e.prev=n&&n.e,N.e.next=f&&f.e,n===null?x||(t.first=N):(n.next=N,n.e.next=N.e),f!==null&&(f.prev=N,f.e.prev=N.e),N}finally{}}function move(e,t,n){for(var f=e.next?e.next.e.nodes_start:n,v=t?t.e.nodes_start:n,_=e.e.nodes_start;_!==null&&_!==f;){var g=get_next_sibling(_);v.before(_),_=g}}function link(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const IS_CUSTOM_ELEMENT=Symbol("is custom element"),IS_HTML=Symbol("is html");function set_value(e,t){var n=get_attributes(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function set_attribute(e,t,n,f){var v=get_attributes(e);v[t]!==(v[t]=n)&&(t==="loading"&&(e[LOADING_ATTR_SYMBOL]=n),n==null?e.removeAttribute(t):typeof n!="string"&&get_setters(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function get_attributes(e){return e.__attributes??={[IS_CUSTOM_ELEMENT]:e.nodeName.includes("-"),[IS_HTML]:e.namespaceURI===NAMESPACE_HTML}}var setters_cache=new Map;function get_setters(e){var t=setters_cache.get(e.nodeName);if(t)return t;setters_cache.set(e.nodeName,t=[]);for(var n,f=e,v=Element.prototype;v!==f;){n=get_descriptors(f);for(var _ in n)n[_].set&&t.push(_);f=get_prototype_of(f)}return t}function bind_value(e,t,n=t){var f=new WeakSet;listen_to_event_and_reset_event(e,"input",v=>{var _=v?e.defaultValue:e.value;if(_=is_numberlike_input(e)?to_number(_):_,n(_),current_batch!==null&&f.add(current_batch),_!==(_=t())){var g=e.selectionStart,w=e.selectionEnd;e.value=_??"",w!==null&&(e.selectionStart=g,e.selectionEnd=Math.min(w,e.value.length))}}),untrack(t)==null&&e.value&&(n(is_numberlike_input(e)?to_number(e.value):e.value),current_batch!==null&&f.add(current_batch)),render_effect(()=>{var v=t();e===document.activeElement&&f.has(current_batch)||is_numberlike_input(e)&&v===to_number(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function is_numberlike_input(e){var t=e.type;return t==="number"||t==="range"}function to_number(e){return e===""?null:+e}function is_bound_this(e,t){return e===t||e?.[STATE_SYMBOL]===t}function bind_this(e={},t,n,f){return effect(()=>{var v,_;return render_effect(()=>{v=_,_=[],untrack(()=>{e!==n(..._)&&(t(e,..._),v&&is_bound_this(n(...v),e)&&t(null,...v))})}),()=>{queue_micro_task(()=>{_&&is_bound_this(n(..._),e)&&t(null,..._)})}}),e}let is_store_binding=!1;function capture_store_binding(e){var t=is_store_binding;try{return is_store_binding=!1,[e(),is_store_binding]}finally{is_store_binding=t}}function prop(e,t,n,f){var v=f,_=!0,g=()=>(_&&(_=!1,v=f),v),w;{var b=STATE_SYMBOL in e||LEGACY_PROPS in e;w=get_descriptor(e,t)?.set??(b&&t in e?I=>e[t]=I:void 0)}var y,x=!1;[y,x]=capture_store_binding(()=>e[t]);var k;if(k=()=>{var I=e[t];return I===void 0?g():(_=!0,I)},w){var E=e.$$legacy;return function(I,A){return arguments.length>0?((!A||E||x)&&w(A?k():I),I):k()}}var T=!1,C=derived(()=>(T=!1,k()));get(C);var N=active_effect;return function(I,A){if(arguments.length>0){const R=A?get(C):proxy(I);return set(C,R),T=!0,v!==void 0&&(v=R),I}return is_destroying_effect&&T||(N.f&DESTROYED)!==0?C.v:get(C)}}class SaveableConfig{}let Config$1=class{#configVersion;get configVersion(){return get(this.#configVersion)}set configVersion(e){set(this.#configVersion,e,!0)}#useBare;get useBare(){return get(this.#useBare)}set useBare(e){set(this.#useBare,e,!0)}#wispSelectedProxy;get wispSelectedProxy(){return get(this.#wispSelectedProxy)}set wispSelectedProxy(e){set(this.#wispSelectedProxy,e,!0)}#wispCustomProxy;get wispCustomProxy(){return get(this.#wispCustomProxy)}set wispCustomProxy(e){set(this.#wispCustomProxy,e,!0)}#bareSelectedProxy;get bareSelectedProxy(){return get(this.#bareSelectedProxy)}set bareSelectedProxy(e){set(this.#bareSelectedProxy,e,!0)}#bareCustomProxy;get bareCustomProxy(){return get(this.#bareCustomProxy)}set bareCustomProxy(e){set(this.#bareCustomProxy,e,!0)}#probeTimeout;get probeTimeout(){return get(this.#probeTimeout)}set probeTimeout(e){set(this.#probeTimeout,e,!0)}constructor(cfg){if(this.#configVersion=state(2),this.#useBare=state(!1),this.#wispSelectedProxy=state("auto"),this.#wispCustomProxy=state(""),this.#bareSelectedProxy=state("auto"),this.#bareCustomProxy=state(""),this.#probeTimeout=state(5e3),cfg!=null)for(const prop in cfg)eval(`cfg.#${prop} = cfg.${prop};`)}toSaveableConfig(){const ret=new SaveableConfig;for(const prop in ret)eval(`ret.${prop} = this.#${prop};`);return ret}};function saveConfig(e){localStorage.setItem("config",JSON.stringify({configVersion:e.configVersion,useBare:e.useBare,wispSelectedProxy:e.wispSelectedProxy,wispCustomProxy:e.wispCustomProxy,bareSelectedProxy:e.bareSelectedProxy,bareCustomProxy:e.bareCustomProxy,probeTimeout:e.probeTimeout}))}function loadConfig(){const e=new Config$1;let t=localStorage.getItem("config");if(t==null)return e;let n=JSON.parse(t);if(n.configVersion==null||n.configVersion<e.configVersion)return e;for(const f in n)e[f]=n[f];return e}const config=proxy(loadConfig()),bareProxyUrls={auto:"Auto",custom:"Custom","https://aluu.xyz/bare/":"Alu 1","https://freemathhw.xyz/bare/":"Alu 2","https://canvaslogin.org/bare/":"Alu 3","https://tnlnda.xyz/bare/":"Alu 4","https://incog.works/bare/":"Incognito 1","https://math.mathpuns.lol/bare/":"Incognito 2","https://math.americahistory.online/bare/":"Incognito 3","https://english.geniuslecture.club/bare/":"Incognito 4","https://definitelyscience.com/bare/":"Definitely Science 1","https://onlinegames.ro/bare/":"Definitely Science 2","https://mages.io/bare/":"Definitely Science 3","https://lichology.com/bare/":"Definitely Science 4","https://kazwire.com/bare/":"Kazwire"},wispProxyUrls={auto:"Auto",custom:"Custom","wss://aluu.xyz/wisp/":"Alu 1","wss://freemathhw.xyz/wisp/":"Alu 2","wss://canvaslogin.org/wisp/":"Alu 3","wss://tnlnda.xyz/wisp/":"Alu 4","wss://incog.works/wisp/":"Incognito 1","wss://math.mathpuns.lol/wisp/":"Incognito 2","wss://math.americahistory.online/wisp/":"Incognito 3","wss://english.geniuslecture.club/wisp/":"Incognito 4","wss://definitelyscience.com/wisp/":"Definitely Science 1","wss://onlinegames.ro/wisp/":"Definitely Science 2","wss://mages.io/wisp/":"Definitely Science 3","wss://lichology.com/wisp/":"Definitely Science 4","wss://anura.pro/":"Anura 1","wss://adoptmy.baby/":"Anura 2","wss://wallstjournal.click/":"Anura 3","wss://phantom.lol/wisp/":"Phantom","wss://wisp.mercurywork.shop/":"Mercury"};var root_1$2=from_html("<li><button> </button></li>"),on_click$2=(e,t)=>t(!1),on_click_1$1=(e,t)=>t(!1),root$1=from_html('<dialog id="configModal" class="modal z-50"><div class="modal-box flex flex-col items-center gap-5 h-1/2"><p class="text-4xl">Settings</p> <div class="flex flex-col items-center grow-1 justify-center w-1/1"><div class="grid grid-cols-2 gap-5 w-1/1"><p class="flex items-center justify-center">Proxy Backend</p> <div class="dropdown"><div tabindex="0" role="button" class="btn m-1 w-1/1"> </div> <ul class="dropdown-content menu bg-base-100 rounded-box p-2 shadow-sm w-1/1"><li><button>Wisp</button></li> <li><button>Bare</button></li></ul></div> <p class="flex items-center justify-center">Proxy Server</p> <div class="dropdown"><div tabindex="0" role="button" class="btn m-1 w-1/1"> </div> <ul class="dropdown-content menu bg-base-100 rounded-box p-2 shadow-sm w-1/1 block overflow-y-scroll max-h-30"></ul></div> <p class="flex items-center justify-center">Custom Proxy URL</p> <input class="input w-1/1"/></div></div> <button class="btn">Close</button></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>');function Config(e,t){push(t,!0);let n=prop(t,"isConfigOpen"),f=state(void 0);user_effect(()=>{n()?get(f).showModal():get(f).close()});var v=root$1(),_=child(v),g=sibling(child(_),2),w=child(g),b=sibling(child(w),2),y=child(b),x=child(y),k=sibling(y,2),E=child(k),T=child(E);T.__click=()=>{config.useBare=!1,document.activeElement.blur()};var C=sibling(E,2),N=child(C);N.__click=()=>{config.useBare=!0,document.activeElement.blur()};var I=sibling(b,4),A=child(I),R=child(A),S=sibling(A,2);each(S,21,()=>Object.entries(config.useBare?bareProxyUrls:wispProxyUrls),index,(O,F)=>{var B=user_derived(()=>to_array(get(F),2));let L=()=>get(B)[0],Y=()=>get(B)[1];var V=root_1$2(),q=child(V);q.__click=()=>{config.useBare?config.bareSelectedProxy=L():config.wispSelectedProxy=L(),document.activeElement.blur()};var W=child(q);template_effect(()=>set_text(W,Y())),append(O,V)});var D=sibling(I,4),P=sibling(g,2);P.__click=[on_click$2,n];var M=sibling(_,2),U=child(M);U.__click=[on_click_1$1,n],bind_this(v,O=>set(f,O),()=>get(f)),template_effect(()=>{set_text(x,config.useBare?"Bare":"Wisp"),set_text(R,config.useBare?bareProxyUrls[config.bareSelectedProxy]:wispProxyUrls[config.wispSelectedProxy])}),event("close",v,()=>n(!1)),bind_value(D,()=>config.useBare?config.bareCustomProxy:config.wispCustomProxy,O=>{config.useBare?config.bareCustomProxy=O:config.wispCustomProxy=O}),append(e,v),pop()}delegate(["click"]);const r=globalThis.SharedWorker,a=globalThis.localStorage,s=globalThis.navigator.serviceWorker,o=MessagePort.prototype.postMessage;async function c(){const e=(await self.clients.matchAll({type:"window",includeUncontrolled:!0})).map(async n=>{const f=await function(v){let _=new MessageChannel;return new Promise(g=>{v.postMessage({type:"getPort",port:_.port2},[_.port2]),_.port1.onmessage=w=>{g(w.data)}})}(n);return await i(f),f}),t=Promise.race([Promise.any(e),new Promise((n,f)=>setTimeout(f,1e3,new TypeError("timeout")))]);try{return await t}catch(n){if(n instanceof AggregateError)throw console.error("bare-mux: failed to get a bare-mux SharedWorker MessagePort as all clients returned an invalid MessagePort."),new Error("All clients returned an invalid MessagePort.");return console.warn("bare-mux: failed to get a bare-mux SharedWorker MessagePort within 1s, retrying"),await c()}}function i(e){const t=new MessageChannel,n=new Promise((f,v)=>{t.port1.onmessage=_=>{_.data.type==="pong"&&f()},setTimeout(v,1500)});return o.call(e,{message:{type:"ping"},port:t.port2},[t.port2]),n}function l(e,t){const n=new r(e,"bare-mux-worker");return t&&s.addEventListener("message",f=>{if(f.data.type==="getPort"&&f.data.port){console.debug("bare-mux: recieved request for port from sw");const v=new r(e,"bare-mux-worker");o.call(f.data.port,v.port,[v.port])}}),n.port}let h=null;function d(){if(h===null){const e=new MessageChannel,t=new ReadableStream;let n;try{o.call(e.port1,t,[t]),n=!0}catch{n=!1}return h=n,n}return h}class p{constructor(t){this.channel=new BroadcastChannel("bare-mux"),t instanceof MessagePort||t instanceof Promise?this.port=t:this.createChannel(t,!0)}createChannel(t,n){if(self.clients)this.port=c(),this.channel.onmessage=f=>{f.data.type==="refreshPort"&&(this.port=c())};else if(t&&SharedWorker){if(!t.startsWith("/")&&!t.includes("://"))throw new Error("Invalid URL. Must be absolute or start at the root.");this.port=l(t,n),console.debug("bare-mux: setting localStorage bare-mux-path to",t),a["bare-mux-path"]=t}else{if(!SharedWorker)throw new Error("Unable to get a channel to the SharedWorker.");{const f=a["bare-mux-path"];if(console.debug("bare-mux: got localStorage bare-mux-path:",f),!f)throw new Error("Unable to get bare-mux workerPath from localStorage.");this.port=l(f,n)}}}async sendMessage(t,n){this.port instanceof Promise&&(this.port=await this.port);try{await i(this.port)}catch{return console.warn("bare-mux: Failed to get a ping response from the worker within 1.5s. Assuming port is dead."),this.createChannel(),await this.sendMessage(t,n)}const f=new MessageChannel,v=[f.port2,...n||[]],_=new Promise((g,w)=>{f.port1.onmessage=b=>{const y=b.data;y.type==="error"?w(y.error):g(y)}});return o.call(this.port,{message:t,port:f.port2},v),await _}}function u(e,t,n){console.error(`error while processing '${n}': `,t),e.postMessage({type:"error",error:t})}class m{constructor(t){this.worker=new p(t)}async getTransport(){return(await this.worker.sendMessage({type:"get"})).name}async setTransport(t,n,f){await this.setManualTransport(`
			const { default: BareTransport } = await import("${t}");
			return [BareTransport, "${t}"];
		`,n,f)}async setManualTransport(t,n,f){if(t==="bare-mux-remote")throw new Error("Use setRemoteTransport.");await this.worker.sendMessage({type:"set",client:{function:t,args:n}},f)}async setRemoteTransport(t,n){const f=new MessageChannel;f.port1.onmessage=async v=>{const _=v.data.port,g=v.data.message;if(g.type==="fetch")try{t.ready||await t.init(),await async function(w,b,y){const x=await y.request(new URL(w.fetch.remote),w.fetch.method,w.fetch.body,w.fetch.headers,null);if(!d()&&x.body instanceof ReadableStream){const k=new Response(x.body);x.body=await k.arrayBuffer()}x.body instanceof ReadableStream||x.body instanceof ArrayBuffer?o.call(b,{type:"fetch",fetch:x},[x.body]):o.call(b,{type:"fetch",fetch:x})}(g,_,t)}catch(w){u(_,w,"fetch")}else if(g.type==="websocket")try{t.ready||await t.init(),await async function(w,b,y){const[x,k]=y.connect(new URL(w.websocket.url),w.websocket.protocols,w.websocket.requestHeaders,E=>{o.call(w.websocket.channel,{type:"open",args:[E]})},E=>{E instanceof ArrayBuffer?o.call(w.websocket.channel,{type:"message",args:[E]},[E]):o.call(w.websocket.channel,{type:"message",args:[E]})},(E,T)=>{o.call(w.websocket.channel,{type:"close",args:[E,T]})},E=>{o.call(w.websocket.channel,{type:"error",args:[E]})});w.websocket.channel.onmessage=E=>{E.data.type==="data"?x(E.data.data):E.data.type==="close"&&k(E.data.closeCode,E.data.closeReason)},o.call(b,{type:"websocket"})}(g,_,t)}catch(w){u(_,w,"websocket")}},await this.worker.sendMessage({type:"set",client:{function:"bare-mux-remote",args:[f.port2,n]}},[f.port2])}getInnerPort(){return this.worker.port}}console.debug("bare-mux: running v2.1.7 (build c56d286)");function httpUrlToWebSocket(e){let t=new URL(e);return t.protocol=t.protocol==="http:"?"ws:":"wss:",t.toString()}function onEnterKeyPressed(e){return t=>{t.key==="Enter"&&e()}}class Prober{#t;get wispUrl(){return get(this.#t)}set wispUrl(t){set(this.#t,t,!0)}#e;get bareUrl(){return get(this.#e)}set bareUrl(t){set(this.#e,t,!0)}constructor(){this.#t=state(""),this.#e=state("")}async probeBare(){let t=[];for(const n in bareProxyUrls){let f=n;f==="auto"||f==="custom"||t.push(new Promise((v,_)=>{setTimeout(()=>{_("Failed to fetch bare on "+f)},config.probeTimeout),fetch(f).then(g=>{g.status==200?v(f):_("Bare returned error code "+g.status+" on url "+f)})}))}await Promise.any(t).then(n=>{this.bareUrl=n})}async probeWisp(){let t=[];for(const n in wispProxyUrls){let f=n;f==="auto"||f==="custom"||t.push(new Promise((v,_)=>{const g=new WebSocket(f);setTimeout(()=>{g.readyState==WebSocket.OPEN?(g.close(),v(f)):(g.close(),_("Failed to open websocket on "+f))},config.probeTimeout),g.onopen=()=>{g.close(),v(f)}}))}await Promise.any(t).then(n=>{this.wispUrl=n})}}const autoProxyProber=proxy(new Prober);class ProxyManager{#t;get isProxyOpen(){return get(this.#t)}set isProxyOpen(t){set(this.#t,t,!0)}#e;get url(){return get(this.#e)}set url(t){set(this.#e,t,!0)}#n;get iframeUrl(){return get(this.#n)}set iframeUrl(t){set(this.#n,t,!0)}#r;get proxyUrl(){return get(this.#r)}set proxyUrl(t){set(this.#r,t)}constructor(){this.#t=state(!1),this.#e=state(""),this.#n=state(""),this.#r=user_derived(()=>config.useBare?config.bareSelectedProxy==="auto"?autoProxyProber.bareUrl:config.bareSelectedProxy==="custom"?config.bareCustomProxy:config.bareSelectedProxy:config.wispSelectedProxy==="auto"?autoProxyProber.wispUrl:config.wispSelectedProxy==="custom"?config.wispCustomProxy:config.wispSelectedProxy)}reloadIframe(){this.iframeUrl=this.uvConfig.prefix+this.uvConfig.encodeUrl(this.url)}setDestination(t){if(t===""){this.url="https://duckduckgo.com";return}if(!t.includes(".")){this.url="https://duckduckgo.com/?q="+t;return}if(!t.startsWith("https://")&&!t.startsWith("http://")){this.url="https://"+t;return}this.url=t}async registerSW(){if(!navigator.serviceWorker)throw location.protocol!=="https:"&&!["localhost","127.0.0.1"].includes(location.hostname)?new Error("Service workers cannot be registered without https."):new Error("Your browser doesn't support service workers.");(await navigator.serviceWorker.getRegistrations()).some(t=>t.active!==null&&t.active.scriptURL==this.uvConfig.stockSW)||await navigator.serviceWorker.register(this.uvConfig.stockSW)}async startProxy(){const t=this.uvConfig.loc;this.bareMuxConnection==null&&(this.bareMuxConnection=new m(t+"/baremux/worker.js")),await this.registerSW(),config.useBare?await this.bareMuxConnection.setTransport(t+"/baremod/index.mjs",[this.proxyUrl]):await this.bareMuxConnection.setTransport(t+"/libcurl/index.mjs",[{wisp:httpUrlToWebSocket(this.proxyUrl)}]),this.reloadIframe()}}const proxyManager=proxy(new ProxyManager);class History{constructor(){this.history=[],this.idx=-1}addToHistory(t){this.getCurrent()!==t&&(this.idx+=1,this.history.length!==0&&(this.history=this.history.slice(0,this.idx)),this.history.push(t))}getCurrent(){return this.history[this.idx]}goForward(){return this.idx>=this.history.length-1?null:(this.idx+=1,this.getCurrent())}goBackward(){return this.idx<=0?null:(this.idx-=1,this.getCurrent())}}var on_click$1=(e,t,n)=>t(n.goBackward()),on_click_1=(e,t,n)=>t(n.goForward()),on_click_2=(e,t)=>t.iframe.contentWindow.location.reload(),on_click_3=(e,t)=>set(t,!1),root_1$1=from_html('<div class="fixed top-0 w-screen flex flex-row gap-1 z-50 p-2"><div><button class="btn btn-square" title="Back"></button> <button class="btn btn-square" title="Forward"></button> <button class="btn btn-square" title="Reload"></button></div> <input type="text" class="input flex grow-1" id="urlBar"/> <div><button class="btn btn-square" title="Close proxy"></button> <button class="btn btn-square" title="Close navbar"></button></div></div>'),on_click_4=(e,t)=>set(t,!0),root_2$1=from_html('<button class="btn btn-square fixed top-0 right-1 z-50" title="Open navbar"></button>');function Navbar(e,t){push(t,!0);let n=state(!1),f=state(void 0),v=new History;user_effect(()=>{v.addToHistory(proxyManager.url)});function _(x){x!=null&&(proxyManager.url=x,proxyManager.reloadIframe())}var g=comment(),w=first_child(g);{var b=x=>{var k=root_1$1(),E=child(k),T=child(E);T.__click=[on_click$1,_,v];var C=sibling(T,2);C.__click=[on_click_1,_,v];var N=sibling(C,2);N.__click=[on_click_2,t];var I=sibling(E,2),A=user_derived(()=>onEnterKeyPressed(()=>{proxyManager.setDestination(get(f).value),proxyManager.reloadIframe()}));I.__keydown=function(...P){get(A)?.apply(this,P)},bind_this(I,P=>set(f,P),()=>get(f));var R=sibling(I,2),S=child(R);S.__click=()=>proxyManager.isProxyOpen=!1;var D=sibling(S,2);D.__click=[on_click_3,n],template_effect(()=>set_value(I,proxyManager.url)),append(x,k)},y=x=>{var k=root_2$1();k.__click=[on_click_4,n],append(x,k)};if_block(w,x=>{get(n)?x(b):x(y,!1)})}append(e,g),pop()}delegate(["click","keydown"]);var root_1=from_html('<div class="bg-base-200 w-full h-full flex flex-row align-center justify-center"><span class="loading loading-spinner loading-xl"></span></div>'),root=from_html('<div class="w-screen h-screen fixed top-0 left-0"><!> <iframe title="Proxy" class="w-full h-full"></iframe> <!></div>');function Proxy$1(e,t){push(t,!0);let n=state(void 0),f=state(!1);function v(){set(f,!0);const x=get(n).contentWindow.location.pathname;x.includes(proxyManager.uvConfig.prefix)&&(proxyManager.url=proxyManager.uvConfig.decodeUrl(x.slice(proxyManager.uvConfig.prefix.length)))}var _=root(),g=child(_);{var w=x=>{var k=root_1();append(x,k)};if_block(g,x=>{get(f)||x(w)})}var b=sibling(g,2);bind_this(b,x=>set(n,x),()=>get(n));var y=sibling(b,2);Navbar(y,{get iframe(){return get(n)}}),template_effect(()=>set_attribute(b,"src",proxyManager.iframeUrl)),event("load",b,v),append(e,_),pop()}var on_click=(e,t)=>set(t,!0),root_2=from_html('<!> <div class="w-screen h-screen flex flex-col items-center p-10"><picture class="w-1/2 grow-1"><source srcset="img/corn-dark.svg" media="(prefers-color-scheme: dark)" class="w-full h-full"/> <img class="w-full h-full" src="img/corn.svg" alt="Corn Unblocked"/></picture> <div class="flex flex-col grow-1 gap-10 w-full items-center"><input type="text" class="input w-1/2" title="Destination URL" placeholder="Enter a URL or search the web"/> <span class="tooltip w-1/8"><button class="btn w-1/1 pointer-events-auto" title="Start proxy">Start</button></span></div> <div class="flex flex-row w-1/3 justify-evenly"><button class="btn w-4/9" title="Open settings">Settings</button> <button class="btn w-4/9" title="Usage help">Help</button></div></div>',1);function App(e,t){push(t,!0),autoProxyProber.probeBare(),autoProxyProber.probeWisp(),user_effect(()=>{saveConfig(config)});let n=state(""),f=state(!1);function v(){proxyManager.proxyUrl!==""&&(proxyManager.setDestination(get(n)),proxyManager.startProxy(),proxyManager.isProxyOpen=!0)}var _=comment(),g=first_child(_);{var w=y=>{Proxy$1(y,{})},b=y=>{var x=root_2(),k=first_child(x);Config(k,{get isConfigOpen(){return get(f)},set isConfigOpen(P){set(f,P,!0)}});var E=sibling(k,2),T=sibling(child(E),2),C=child(T),N=user_derived(()=>onEnterKeyPressed(v));C.__keydown=function(...P){get(N)?.apply(this,P)};var I=sibling(C,2),A=child(I);A.__click=v;var R=sibling(T,2),S=child(R);S.__click=[on_click,f];var D=sibling(S,2);D.__click=function(...P){window.open.bind(window,"https://sites.google.com/view/cornunblocked/help/usage")?.apply(this,P)},template_effect(()=>{set_attribute(I,"data-tip",proxyManager.proxyUrl===""?"Proxy URL not found! Go to settings and configure proxy server":""),A.disabled=proxyManager.proxyUrl===""}),bind_value(C,()=>get(n),P=>set(n,P)),append(y,x)};if_block(g,y=>{proxyManager.isProxyOpen?y(w):y(b,!1)})}append(e,_),pop()}delegate(["keydown","click"]);proxyManager.uvConfig=__uv$config;mount(App,{target:document.getElementById("app")});
